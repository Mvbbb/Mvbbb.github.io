{"title":"文件上传下载","date":"2020-11-13T06:47:34.000Z","date_formatted":{"ll":"Nov 13, 2020","L":"11/13/2020","MM-DD":"11-13"},"link":"vuhe3q","comments":true,"categories":["Java","JavaWeb"],"updated":"2021-02-03T04:20:59.233Z","content":"<h1 id=\"上传功能\">上传功能<a title=\"#上传功能\" href=\"#上传功能\"></a></h1>\n<p>需要使用到<img src=\"https://cdn.nlark.com/yuque/0/2020/png/1552854/1605250907375-38c73e16-5567-4fd9-96ee-7ca7dc7bbe0f.png#align=left&amp;display=inline&amp;height=24&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=47&amp;originWidth=364&amp;size=3749&amp;status=done&amp;style=none&amp;width=182\" alt=\"image.png\">两个包<br>\n<strong>index.jsp</strong></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">&quot;post&quot;</span> action=<span class=\"string\">&quot;upload.do&quot;</span> enctype=<span class=\"string\">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class=\"line\">    用户名: &lt;input type=<span class=\"string\">&quot;text&quot;</span>&gt;&lt;br&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;file&quot;</span> name=<span class=\"string\">&quot;file1&quot;</span>&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;|</span><br><span class=\"line\">        &lt;input type=<span class=\"string\">&quot;reset&quot;</span>&gt;</span><br><span class=\"line\">  &lt;/form&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>FileServlet.java</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/upload.do&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.doGet(req, resp);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;FileServlet.java doPost&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 判断上传的文件是普通表单还是带文件的表单</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!ServletFileUpload.isMultipartContent(req))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;  <span class=\"comment\">// 普通表单</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 创建上传文件的保存路径, 建议保存到 WEB-INF 目录下, 安全, 用户无法直接访问上传的文件</span></span><br><span class=\"line\">        String uploadPath = <span class=\"keyword\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/upload&quot;</span>); <span class=\"comment\">// 该项目下的/WEB-INF/upload 目录</span></span><br><span class=\"line\">        File uploadFile = <span class=\"keyword\">new</span> File(uploadPath);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!uploadFile.exists())&#123;</span><br><span class=\"line\">            uploadFile.mkdir(); <span class=\"comment\">// 创建这个目录</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 缓存, 临时文件</span></span><br><span class=\"line\">        <span class=\"comment\">// 临时路径, 如果文件超过预取大小, 将该文件放到临时文件中, 过几天自动删除, 或者提醒用户转存为永久</span></span><br><span class=\"line\">        String temPath = <span class=\"keyword\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/tmp&quot;</span>); <span class=\"comment\">// 该项目下的/WEB-INF/upload 目录</span></span><br><span class=\"line\">        File tmpFile = <span class=\"keyword\">new</span> File(uploadPath);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!tmpFile.exists())&#123;</span><br><span class=\"line\">            tmpFile.mkdir(); <span class=\"comment\">// 创建这个目录</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 处理上传的文件一般通过流来获取, 我们可以使用 request.getInputStream(), 原生态的文件上传流来获取, 十分麻烦</span></span><br><span class=\"line\">        <span class=\"comment\">// 一般建议使用 Apache 的文件上传组件来实现, common-fileupload, 它依赖于 commons-io 组件</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//1. 创建 DiskFileItemFactory 对象, 处理上传路径或者大小的限制</span></span><br><span class=\"line\">        DiskFileItemFactory factory=<span class=\"keyword\">new</span> DiskFileItemFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* 可选项,非必须</span></span><br><span class=\"line\"><span class=\"comment\">        // 通过这工厂设置一个缓冲区, 当上传文件大于这个缓冲区是, 将他放到临时文件中</span></span><br><span class=\"line\"><span class=\"comment\">        factory.setSizeThreshold(1024*1024); // 缓冲区大小为1m</span></span><br><span class=\"line\"><span class=\"comment\">        factory.setRepository(tmpFile); // 临时目录的保存目录</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2. 获取 ServletFileUpload</span></span><br><span class=\"line\">        ServletFileUpload upload=<span class=\"keyword\">new</span> ServletFileUpload(factory);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* 可选项,非必须</span></span><br><span class=\"line\"><span class=\"comment\">        // 监听文件的上传进度</span></span><br><span class=\"line\"><span class=\"comment\">        upload.setProgressListener(new ProgressListener() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">            @Override</span></span><br><span class=\"line\"><span class=\"comment\">            public void update(long l, long l1, int i) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                System.out.println(&quot;总大小: &quot;+l1+&quot;已上传: &quot;+l);</span></span><br><span class=\"line\"><span class=\"comment\">            &#125;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;);</span></span><br><span class=\"line\"><span class=\"comment\">        upload.setHeaderEncoding(&quot;UTF-8&quot;);  //处理乱码问题</span></span><br><span class=\"line\"><span class=\"comment\">        upload.setFileSizeMax(1024*1024*10); //设置单个文件的最大值</span></span><br><span class=\"line\"><span class=\"comment\">        upload.setSizeMax(1024*1024*10); // 设置总共能够上传文件的大小</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3. 处理上传的文件</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 将前端请求解析, 封装成 FileItem 对象, 需要从 ServletFileUpload 对象获取</span></span><br><span class=\"line\">            List&lt;FileItem&gt; fileItems = upload.parseRequest(req);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (FileItem fileItem : fileItems) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 判断上传的文件是普通表单还是带文件的表单</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(fileItem.isFormField())&#123;</span><br><span class=\"line\">                    <span class=\"comment\">// name 是指前端表单控件的 name</span></span><br><span class=\"line\">                    String name = fileItem.getFieldName();</span><br><span class=\"line\">                    String value=fileItem.getString(<span class=\"string\">&quot;UTF-8&quot;</span>); <span class=\"comment\">// 处理乱码</span></span><br><span class=\"line\">                    System.out.println(name+<span class=\"string\">&quot;: &quot;</span>+value);</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    <span class=\"comment\">// 如果是文件表单</span></span><br><span class=\"line\">                    <span class=\"comment\">//================1. 处理文件</span></span><br><span class=\"line\">                    <span class=\"comment\">// 获取文件名(全路径)</span></span><br><span class=\"line\">                    String uploadFileName=fileItem.getName();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(uploadFileName.trim().equals(<span class=\"string\">&quot;&quot;</span>)||uploadFileName==<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"comment\">// 上传的文件名(单文件)</span></span><br><span class=\"line\">                    String fileName=uploadFileName.substring(uploadFileName.lastIndexOf(<span class=\"string\">&quot;/&quot;</span>)+<span class=\"number\">1</span>);</span><br><span class=\"line\">                    <span class=\"comment\">// 文件后缀</span></span><br><span class=\"line\">                    String fileExtName=uploadFileName.substring(uploadFileName.lastIndexOf(<span class=\"string\">&quot;.&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">                    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">                    如果问价后缀不合法可以直接return, 告诉用户文件类型不合法</span></span><br><span class=\"line\"><span class=\"comment\">                    可以使用UUID(唯一通用识别码),保证文件名唯一</span></span><br><span class=\"line\"><span class=\"comment\">                    UUID.randomUUID(), 随机生成一个唯一识别通用码</span></span><br><span class=\"line\"><span class=\"comment\">                     */</span></span><br><span class=\"line\">                    String uuidPath = UUID.randomUUID().toString();</span><br><span class=\"line\">                    <span class=\"comment\">//===============2. 存放地址</span></span><br><span class=\"line\">                    String realPath=uploadPath+<span class=\"string\">&quot;/&quot;</span>+uuidPath;</span><br><span class=\"line\">                    File realPathFile = <span class=\"keyword\">new</span> File(realPath);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(!realPathFile.exists())&#123;</span><br><span class=\"line\">                        realPathFile.mkdir();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"comment\">//===============3. 文件传输</span></span><br><span class=\"line\">                    <span class=\"comment\">// 获得文件上传流</span></span><br><span class=\"line\">                    InputStream inputStream=fileItem.getInputStream();</span><br><span class=\"line\">                    <span class=\"comment\">// 创建文件输出流</span></span><br><span class=\"line\">                    <span class=\"comment\">// realPath=真实的文件夹</span></span><br><span class=\"line\">                    <span class=\"comment\">// 差了一个文件; 加上输出文件的名字+&quot;/&quot;+uuidFileName</span></span><br><span class=\"line\">                    FileOutputStream fos=<span class=\"keyword\">new</span> FileOutputStream(realPathFile+<span class=\"string\">&quot;/&quot;</span>+fileName);</span><br><span class=\"line\">                    <span class=\"comment\">// 创建缓冲区</span></span><br><span class=\"line\">                    <span class=\"keyword\">byte</span>[] buffer=<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span>*<span class=\"number\">1024</span>];</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> len=<span class=\"number\">0</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">while</span>((len=inputStream.read(buffer))&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                        fos.write(buffer, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    fos.close();</span><br><span class=\"line\">                    inputStream.close();</span><br><span class=\"line\">                    fileItem.delete();</span><br><span class=\"line\">                    <span class=\"comment\">// 通知前端文件上传成功</span></span><br><span class=\"line\">                    System.out.println(<span class=\"string\">&quot;成功&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (FileUploadException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在 idea 中, 上传成功的文件会保存到 <code>out/artifacts/项目名/WEB-INF</code>  下</p>\n<h1 id=\"下载功能\">下载功能<a title=\"#下载功能\" href=\"#下载功能\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;download.do&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileDownloadServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//获取到资源的路径</span></span><br><span class=\"line\">        String path = <span class=\"keyword\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/download/1.png&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//读取资源</span></span><br><span class=\"line\">        FileInputStream fileInputStream = <span class=\"keyword\">new</span> FileInputStream(path);</span><br><span class=\"line\">        <span class=\"comment\">//获取到文件名,路径在电脑上保存是\\\\形式的。</span></span><br><span class=\"line\">        String fileName = path.substring(path.lastIndexOf(<span class=\"string\">&quot;\\\\&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置消息头，告诉浏览器，我要下载1.png这个图片, 解决中文乱码问题</span></span><br><span class=\"line\">        resp.setHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(fileName, <span class=\"string\">&quot;UTF-8&quot;</span>));</span><br><span class=\"line\">        <span class=\"comment\">//把读取到的资源写给浏览器</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> len = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">        ServletOutputStream servletOutputStream = resp.getOutputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> ((len = fileInputStream.read(bytes)) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            servletOutputStream.write(bytes, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        servletOutputStream.close();</span><br><span class=\"line\">        fileInputStream.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.doPost(req, resp);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","prev":{"title":"在服务器上部署运行Socket","link":"bvgh8x"},"next":{"title":"过滤器-监听器","link":"oz6abw"},"plink":"https://mvbbb.github.io/vuhe3q/","toc":[{"id":"上传功能","title":"上传功能","index":"1"},{"id":"下载功能","title":"下载功能","index":"2"}],"copyright":{"author":"Mvbbb","link":"<a href=\"https://mvbbb.github.io/vuhe3q/\" title=\"文件上传下载\">https://mvbbb.github.io/vuhe3q/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}