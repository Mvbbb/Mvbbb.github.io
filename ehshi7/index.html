<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="referrer" content="no-referrer">
<title>八皇后问题 - Yu</title>
<base href="/">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<link rel="canonical" href="https://mvbbb.github.io/ehshi7/">
<link rel="icon" type="image/x-icon" href="/images/web.png">

<meta name="description" content="题目链接 P1219 [USACO1.5]八皇后 Checker Challenge 力扣题目链接 N Queens 这是一道经典的搜索题目 力扣中的 n queens 暴力朴素解法 使用到了回溯 12345678910111213141516backtracking() &amp;#123;    if (终止条件) &amp;#123;        存放结果;    &amp;#125;    for (枚举同一个">
<meta property="og:type" content="website">
<meta property="og:title" content="八皇后问题">
<meta property="og:url" content="https://mvbbb.github.io/ehshi7/index.html">
<meta property="og:site_name" content="Yu">
<meta property="og:description" content="题目链接 P1219 [USACO1.5]八皇后 Checker Challenge 力扣题目链接 N Queens 这是一道经典的搜索题目 力扣中的 n queens 暴力朴素解法 使用到了回溯 12345678910111213141516backtracking() &amp;#123;    if (终止条件) &amp;#123;        存放结果;    &amp;#125;    for (枚举同一个">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mvbbb.github.io/ehshi7/images/avatar.jpg">
<meta property="article:published_time" content="2020-10-08T08:53:06.000Z">
<meta property="article:modified_time" content="2021-02-03T04:20:59.573Z">
<meta property="article:author" content="Mvbbb">
<meta property="article:tag" content="算法">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mvbbb.github.io/ehshi7/images/avatar.jpg">
<script type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","publisher":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"url":"https://mvbbb.github.io","image":"https://mvbbb.github.io/images/avatar.jpg","description":"Who i am,who u are","author":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"}},{"@context":"http://schema.org","@type":"Article","articleSection":"数据结构与算法","url":"https://mvbbb.github.io/ehshi7/","headline":"八皇后问题","image":"https://mvbbb.github.io/images/avatar.jpg","datePublished":"2020-10-08T08:53:06.000Z","dateModified":"2021-02-03T04:20:59.573Z","keywords":"算法","description":"Who i am,who u are","publisher":{"@type":"Organization","name":"Yu","logo":{"@type":"ImageObject","url":"https://mvbbb.github.io/images/avatar.jpg"}},"author":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mvbbb.github.io/ehshi7/"}}]</script><link rel="alternate" type="application/atom+xml" title="Yu" href="/rss2.xml">
<script async="" src="//www.googletagmanager.com/gtag/js?id=UA-160027215-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-160027215-1');</script>
<meta name="theme-color" content=""><script type="application/json" is="state">{&q;api/ZWhzaGk3.json&q;:{&q;title&q;:&q;八皇后问题&q;,&q;date&q;:&q;2020-10-08T08:53:06.000Z&q;,&q;date_formatted&q;:{&q;ll&q;:&q;Oct 8, 2020&q;,&q;L&q;:&q;10/08/2020&q;,&q;MM-DD&q;:&q;10-08&q;},&q;link&q;:&q;ehshi7&q;,&q;comments&q;:true,&q;tags&q;:[&q;算法&q;],&q;categories&q;:[&q;备战蓝桥杯&q;,&q;数据结构与算法&q;],&q;updated&q;:&q;2021-02-03T04:20:59.573Z&q;,&q;content&q;:&q;&l;p&g;题目链接 &l;a href=\&q;https://www.luogu.com.cn/problem/P1219\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;P1219 [USACO1.5]八皇后 Checker Challenge&l;/a&g;&l;br&g;\n力扣题目链接 &l;a href=\&q;https://leetcode-cn.com/problems/n-queens/\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;N Queens&l;/a&g;&l;br&g;\n这是一道经典的搜索题目&l;/p&g;\n&l;h1 id=\&q;力扣中的-n-queens\&q;&g;力扣中的 n queens&l;a title=\&q;#力扣中的-n-queens\&q; href=\&q;#力扣中的-n-queens\&q;&g;&l;/a&g;&l;/h1&g;\n&l;h2 id=\&q;暴力朴素解法\&q;&g;暴力朴素解法&l;a title=\&q;#暴力朴素解法\&q; href=\&q;#暴力朴素解法\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;使用到了回溯&l;/p&g;\n&l;figure class=\&q;highlight cpp\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;backtracking() &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;if&l;/span&g; (终止条件) &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        存放结果;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;for&l;/span&g; (枚举同一个位置的所有可能性，可以想成节点孩子的数量) &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        递归，处理节点;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        backtracking();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        回溯，撤销处理结果&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;作者：carlsun&l;span class=\&q;number\&q;&g;-2&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;链接：https:&l;span class=\&q;comment\&q;&g;//leetcode-cn.com/problems/n-queens/solution/51-n-queenshui-su-fa-jing-dian-wen-ti-xiang-jie-by/&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;来源：力扣（LeetCode）&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;figure class=\&q;highlight java\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;19&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;21&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;22&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;23&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;24&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;25&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;26&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;27&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;28&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;29&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;30&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;31&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;32&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;33&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;34&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;35&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;36&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;37&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;38&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;39&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;40&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;41&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;42&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;43&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;44&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;45&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;46&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;47&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;48&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;49&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;50&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;51&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;52&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;53&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;54&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;55&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;56&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;57&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;58&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;59&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;60&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;class\&q;&g;&l;span class=\&q;keyword\&q;&g;class&l;/span&g; &l;span class=\&q;title\&q;&g;Solution&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;public&l;/span&g; List&a;lt;List&a;lt;String&a;gt;&a;gt; solveNQueens(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; n) &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        List&a;lt;List&a;lt;String&a;gt;&a;gt; res=&l;span class=\&q;keyword\&q;&g;new&l;/span&g; ArrayList&a;lt;&a;gt;();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;char&l;/span&g;[][] board = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; &l;span class=\&q;keyword\&q;&g;char&l;/span&g;[n][n];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        init(board);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        helper(board,res,&l;span class=\&q;number\&q;&g;0&l;/span&g;); &l;span class=\&q;comment\&q;&g;// 从第0行开始&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; res;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;private&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;helper&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;char&l;/span&g;[][] board, List&a;lt;List&a;lt;String&a;gt;&a;gt; res, &l;span class=\&q;keyword\&q;&g;int&l;/span&g; rowIndex)&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(rowIndex==board.length)&a;#123; &l;span class=\&q;comment\&q;&g;// 越过最后一行了&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            res.add(generate(board));&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;return&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;comment\&q;&g;// 遍历这一行的每一个位置&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; colIndex=&l;span class=\&q;number\&q;&g;0&l;/span&g;;colIndex&a;lt;board.length;colIndex++)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(isValid(board,rowIndex,colIndex))&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                board[rowIndex][colIndex]=&l;span class=\&q;string\&q;&g;&a;#x27;Q&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                helper(board, res, rowIndex+&l;span class=\&q;number\&q;&g;1&l;/span&g;);;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                board[rowIndex][colIndex]=&l;span class=\&q;string\&q;&g;&a;#x27;.&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;private&l;/span&g; List&a;lt;String&a;gt; &l;span class=\&q;title\&q;&g;generate&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;char&l;/span&g;[][] board)&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        List&a;lt;String&a;gt; list=&l;span class=\&q;keyword\&q;&g;new&l;/span&g; ArrayList&a;lt;&a;gt;();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;char&l;/span&g;[] row:board)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            StringBuffer sb=&l;span class=\&q;keyword\&q;&g;new&l;/span&g; StringBuffer();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;char&l;/span&g; c:row)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                sb.append(c);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            list.add(sb.toString());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; list;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;comment\&q;&g;// true 可用, false 不可用&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;private&l;/span&g; &l;span class=\&q;keyword\&q;&g;boolean&l;/span&g; &l;span class=\&q;title\&q;&g;isValid&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;char&l;/span&g;[][] board, &l;span class=\&q;keyword\&q;&g;int&l;/span&g; rowIndex, &l;span class=\&q;keyword\&q;&g;int&l;/span&g; colIndex)&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; i=rowIndex-&l;span class=\&q;number\&q;&g;1&l;/span&g;;i&a;gt;=&l;span class=\&q;number\&q;&g;0&l;/span&g;;i--)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(board[i][colIndex]==&l;span class=\&q;string\&q;&g;&a;#x27;Q&a;#x27;&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                &l;span class=\&q;keyword\&q;&g;return&l;/span&g; &l;span class=\&q;keyword\&q;&g;false&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;comment\&q;&g;// 主对角线(只包含当前位置的上半部分)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; i=rowIndex-&l;span class=\&q;number\&q;&g;1&l;/span&g;,j=colIndex-&l;span class=\&q;number\&q;&g;1&l;/span&g;;i&a;gt;=&l;span class=\&q;number\&q;&g;0&l;/span&g;&a;amp;&a;amp;j&a;gt;=&l;span class=\&q;number\&q;&g;0&l;/span&g;;i--,j--)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(board[i][j]==&l;span class=\&q;string\&q;&g;&a;#x27;Q&a;#x27;&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                &l;span class=\&q;keyword\&q;&g;return&l;/span&g; &l;span class=\&q;keyword\&q;&g;false&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;comment\&q;&g;// 副对角线(只包含当前位置的上半部分)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; i=rowIndex-&l;span class=\&q;number\&q;&g;1&l;/span&g;,j=colIndex+&l;span class=\&q;number\&q;&g;1&l;/span&g;;i&a;gt;=&l;span class=\&q;number\&q;&g;0&l;/span&g;&a;amp;&a;amp;j&a;lt;board.length;i--,j++)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(board[i][j]==&l;span class=\&q;string\&q;&g;&a;#x27;Q&a;#x27;&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                &l;span class=\&q;keyword\&q;&g;return&l;/span&g; &l;span class=\&q;keyword\&q;&g;false&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; &l;span class=\&q;keyword\&q;&g;true&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;private&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;init&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;char&l;/span&g;[][] board)&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; i=&l;span class=\&q;number\&q;&g;0&l;/span&g;;i&a;lt;board.length;i++)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            Arrays.fill(board[i],&l;span class=\&q;string\&q;&g;&a;#x27;.&a;#x27;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;使用数组记录\&q;&g;使用数组记录&l;a title=\&q;#使用数组记录\&q; href=\&q;#使用数组记录\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1602224086139-3c1d85ba-5ae8-4a13-be7c-e3eee65c6dcd.png#align=left&a;amp;display=inline&a;amp;height=270&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=540&a;amp;originWidth=960&a;amp;size=85739&a;amp;status=done&a;amp;style=none&a;amp;width=480\&q; alt=\&q;image.png\&q; class=\&q;φcx\&q;&g;&l;/p&g;\n&l;blockquote&g;\n&l;p&g;&l;a href=\&q;http://zxi.mytechroad.com/blog/searching/leetcode-51-n-queens/\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;http://zxi.mytechroad.com/blog/searching/leetcode-51-n-queens/&l;/a&g;&l;/p&g;\n&l;/blockquote&g;\n&l;figure class=\&q;highlight cpp\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;19&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;21&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;22&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;23&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;24&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;25&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;26&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;27&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;28&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;29&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;30&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;31&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;32&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;33&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;34&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;35&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;36&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;37&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;38&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;39&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;40&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;41&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;42&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;43&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;44&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;class\&q;&g;&l;span class=\&q;keyword\&q;&g;class&l;/span&g; &l;span class=\&q;title\&q;&g;Solution&l;/span&g; &a;#123;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g;:&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;built_in\&q;&g;string&l;/span&g;&a;gt;&a;gt; solveNQueens(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; n) &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        board=&l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;built_in\&q;&g;string&l;/span&g;&a;gt;(n,&l;span class=\&q;built_in\&q;&g;string&l;/span&g;(n,&l;span class=\&q;string\&q;&g;&a;#x27;.&a;#x27;&l;/span&g;)); &l;span class=\&q;comment\&q;&g;//初始化一个面板&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        cols=&l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;keyword\&q;&g;int&l;/span&g;&a;gt;(n,&l;span class=\&q;number\&q;&g;0&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        diag1=&l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;keyword\&q;&g;int&l;/span&g;&a;gt;(&l;span class=\&q;number\&q;&g;2&l;/span&g;*n&l;span class=\&q;number\&q;&g;-1&l;/span&g;,&l;span class=\&q;number\&q;&g;0&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        diag2=&l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;keyword\&q;&g;int&l;/span&g;&a;gt;(&l;span class=\&q;number\&q;&g;2&l;/span&g;*n&l;span class=\&q;number\&q;&g;-1&l;/span&g;,&l;span class=\&q;number\&q;&g;0&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        nqueens(n,&l;span class=\&q;number\&q;&g;0&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; res;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;private&l;/span&g;:&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;built_in\&q;&g;string&l;/span&g;&a;gt; board; &l;span class=\&q;comment\&q;&g;// 保存面板&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;comment\&q;&g;/*第i个位置是否可用, 每次加入皇后都会修改这里的状态*/&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;keyword\&q;&g;int&l;/span&g;&a;gt; cols; &l;span class=\&q;comment\&q;&g;// 该列是否被占用&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;keyword\&q;&g;int&l;/span&g;&a;gt; diag1; &l;span class=\&q;comment\&q;&g;// 该对角线是否被占用 (平行于主对角线)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;keyword\&q;&g;int&l;/span&g;&a;gt; diag2; &l;span class=\&q;comment\&q;&g;// (偏向于副对角线)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;built_in\&q;&g;vector&l;/span&g;&a;lt;&l;span class=\&q;built_in\&q;&g;string&l;/span&g;&a;gt;&a;gt; res;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;bool&l;/span&g; &l;span class=\&q;title\&q;&g;isOk&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; x,&l;span class=\&q;keyword\&q;&g;int&l;/span&g; y,&l;span class=\&q;keyword\&q;&g;int&l;/span&g; n)&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; !cols[x]&a;amp;&a;amp;!diag1[x+y]&a;amp;&a;amp;!diag2[x-y+n&l;span class=\&q;number\&q;&g;-1&l;/span&g;];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;comment\&q;&g;/*在board的某个位置加入或者删除皇后都会改变3个状态数组的状态*/&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;updateBoard&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; x,&l;span class=\&q;keyword\&q;&g;int&l;/span&g; y,&l;span class=\&q;keyword\&q;&g;int&l;/span&g; n,&l;span class=\&q;keyword\&q;&g;bool&l;/span&g; is_put)&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        cols[x]=is_put;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        diag1[x+y]=is_put;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        diag2[x-y+n&l;span class=\&q;number\&q;&g;-1&l;/span&g;]=is_put;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        board[x][y]=is_put?&l;span class=\&q;string\&q;&g;&a;#x27;Q&a;#x27;&l;/span&g;:&l;span class=\&q;string\&q;&g;&a;#x27;.&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;nqueens&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;const&l;/span&g; &l;span class=\&q;keyword\&q;&g;int&l;/span&g; n,&l;span class=\&q;keyword\&q;&g;const&l;/span&g; &l;span class=\&q;keyword\&q;&g;int&l;/span&g; y)&l;/span&g;&l;/span&g;&a;#123; &l;span class=\&q;comment\&q;&g;//大小 行&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(y==n)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            res.push_back(board);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;return&l;/span&g; ;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; x=&l;span class=\&q;number\&q;&g;0&l;/span&g;;x&a;lt;n;x++)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(isOk(x,y,n))&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                updateBoard(x,y,n,&l;span class=\&q;literal\&q;&g;true&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                nqueens(n,y+&l;span class=\&q;number\&q;&g;1&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                updateBoard(x,y,n,&l;span class=\&q;literal\&q;&g;false&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;时间复杂度 &l;img src=\&q;https://cdn.nlark.com/yuque/__latex/1dfc0dc62ab0b72188128f273546f6b4.svg#card=math&a;amp;code=O%28n%21%29&a;amp;height=20&a;amp;width=41\&q; alt=\&q;\&q;&g;&l;br&g;\n空间复杂度 &l;img src=\&q;https://cdn.nlark.com/yuque/__latex/7ba55e7c64a9405a0b39a1107e90ca94.svg#card=math&a;amp;code=O%28n%29%0A&a;amp;height=20&a;amp;width=36\&q; alt=\&q;\&q;&g;  取决于皇后的数量, 递归调用的层数不会超过 &l;img src=\&q;https://cdn.nlark.com/yuque/__latex/8d9c307cb7f3c4a32822a51922d1ceaa.svg#card=math&a;amp;code=N&a;amp;height=16&a;amp;width=15\&q; alt=\&q;\&q;&g;&l;/p&g;\n&l;h2 id=\&q;使用位运算进行状态压缩\&q;&g;使用位运算进行状态压缩&l;a title=\&q;#使用位运算进行状态压缩\&q; href=\&q;#使用位运算进行状态压缩\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;优点降低了空间复杂度&l;/p&g;\n&l;blockquote&g;\n&l;p&g;&l;a href=\&q;https://leetcode-cn.com/problems/n-queens/solution/nhuang-hou-by-leetcode-solution/\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;https://leetcode-cn.com/problems/n-queens/solution/nhuang-hou-by-leetcode-solution/&l;/a&g;&l;/p&g;\n&l;/blockquote&g;\n&l;h1 id=\&q;洛谷中的-八皇后\&q;&g;洛谷中的 八皇后&l;a title=\&q;#洛谷中的-八皇后\&q; href=\&q;#洛谷中的-八皇后\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;同力扣, 使用 ‘Q’ 代表该位置有皇后, ‘.’ 代表该位置没有皇后&l;br&g;\n洛谷中的下标是从 1 开始的&l;/p&g;\n&l;figure class=\&q;highlight cpp\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;19&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;21&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;22&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;23&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;24&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;25&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;26&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;27&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;28&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;29&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;30&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;31&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;32&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;33&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;34&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;35&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;36&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;37&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;38&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;39&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;40&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;41&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;42&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;43&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;44&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;45&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;46&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;47&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;48&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;49&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;50&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;51&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;52&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;53&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;54&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;55&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;#&l;span class=\&q;meta-keyword\&q;&g;include&l;/span&g; &l;span class=\&q;meta-string\&q;&g;&a;lt;iostream&a;gt;&l;/span&g;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;#&l;span class=\&q;meta-keyword\&q;&g;include&l;/span&g;&l;span class=\&q;meta-string\&q;&g;&a;lt;string.h&a;gt;&l;/span&g;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;using&l;/span&g; &l;span class=\&q;keyword\&q;&g;namespace&l;/span&g; &l;span class=\&q;built_in\&q;&g;std&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;const&l;/span&g; &l;span class=\&q;keyword\&q;&g;int&l;/span&g; maxn=&l;span class=\&q;number\&q;&g;15&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;int&l;/span&g; n,res;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;int&l;/span&g; cols[maxn];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;int&l;/span&g; diag1[maxn*&l;span class=\&q;number\&q;&g;2&l;/span&g;];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;int&l;/span&g; diag2[maxn*&l;span class=\&q;number\&q;&g;2&l;/span&g;];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;char&l;/span&g; board[maxn][maxn];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;bool&l;/span&g; &l;span class=\&q;title\&q;&g;isOk&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; row_index,&l;span class=\&q;keyword\&q;&g;int&l;/span&g; col_index)&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;return&l;/span&g; !cols[col_index]&a;amp;&a;amp;!diag1[col_index+row_index]&a;amp;&a;amp;!diag2[row_index-col_index+n];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;update&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; row_index,&l;span class=\&q;keyword\&q;&g;int&l;/span&g; col_index,&l;span class=\&q;keyword\&q;&g;bool&l;/span&g; to)&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    cols[col_index]=to;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    diag1[col_index+row_index]=to;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    diag2[row_index-col_index+n]=to;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    board[row_index][col_index]=to?&l;span class=\&q;string\&q;&g;&a;#x27;Q&a;#x27;&l;/span&g;:&l;span class=\&q;string\&q;&g;&a;#x27;.&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;print_board&l;/span&g;&l;span class=\&q;params\&q;&g;()&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; i=&l;span class=\&q;number\&q;&g;1&l;/span&g;;i&a;lt;=n;i++)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; j=&l;span class=\&q;number\&q;&g;1&l;/span&g;;j&a;lt;=n;j++)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(board[i][j]==&l;span class=\&q;string\&q;&g;&a;#x27;Q&a;#x27;&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;                &l;span class=\&q;built_in\&q;&g;cout&l;/span&g;&a;lt;&a;lt;j&a;lt;&a;lt;&l;span class=\&q;string\&q;&g;&a;quot; &a;quot;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;cout&l;/span&g;&a;lt;&a;lt;&l;span class=\&q;built_in\&q;&g;endl&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;solve&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; row_index)&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(row_index==n+&l;span class=\&q;number\&q;&g;1&l;/span&g;)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        res++;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(res&a;lt;=&l;span class=\&q;number\&q;&g;3&l;/span&g;)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            print_board();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; ;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;for&l;/span&g;(&l;span class=\&q;keyword\&q;&g;int&l;/span&g; col_index=&l;span class=\&q;number\&q;&g;1&l;/span&g;;col_index&a;lt;=n;col_index++)&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;if&l;/span&g;(isOk(row_index,col_index))&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            update(row_index,col_index,&l;span class=\&q;literal\&q;&g;true&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            solve(row_index+&l;span class=\&q;number\&q;&g;1&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            update(row_index,col_index,&l;span class=\&q;literal\&q;&g;false&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;int&l;/span&g; &l;span class=\&q;title\&q;&g;main&l;/span&g;&l;span class=\&q;params\&q;&g;()&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;cin&l;/span&g;&a;gt;&a;gt;n;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;memset&l;/span&g;(board,&l;span class=\&q;string\&q;&g;&a;#x27;.&a;#x27;&l;/span&g;,&l;span class=\&q;keyword\&q;&g;sizeof&l;/span&g;(board));&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    solve(&l;span class=\&q;number\&q;&g;1&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;built_in\&q;&g;cout&l;/span&g;&a;lt;&a;lt;res&a;lt;&a;lt;&l;span class=\&q;built_in\&q;&g;endl&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;keyword\&q;&g;return&l;/span&g; &l;span class=\&q;number\&q;&g;0&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;&l;div&g;&l;h1 id=\&q;推荐文章\&q;&g;推荐文章&l;a title=\&q;#推荐文章\&q; href=\&q;%e6%8e%a8%e8%8d%90%e6%96%87%e7%ab%a0\&q;&g;&l;/a&g;&l;/h1&g;&l;ul&g;&l;li&g;&l;a href=\&q;https://mvbbb.github.io/lvkhi9/\&q;&g;洛谷【搜索】暴力专项训练&l;/a&g;&l;/li&g;&l;li&g;&l;a href=\&q;https://mvbbb.github.io/nftmte/\&q;&g;位运算&l;/a&g;&l;/li&g;&l;li&g;&l;a href=\&q;https://mvbbb.github.io/wu5oin/\&q;&g;kuangbin 题单&l;/a&g;&l;/li&g;&l;li&g;&l;a href=\&q;https://mvbbb.github.io/wdmukq/\&q;&g;挑战程序设计竞赛-习题&l;/a&g;&l;/li&g;&l;li&g;&l;a href=\&q;https://lailin.xyz/post/defer.html\&q;&g;Go数据结构与算法05-栈下: 深入理解 defer&l;/a&g;&l;/li&g;&l;/ul&g;&l;/div&g;&q;,&q;prev&q;:{&q;title&q;:&q;洛谷【搜索】暴力专项训练&q;,&q;link&q;:&q;lvkhi9&q;},&q;next&q;:{&q;title&q;:&q;博客文章发布BUG记录&q;,&q;link&q;:&q;lgv9s5&q;},&q;plink&q;:&q;https://mvbbb.github.io/ehshi7/&q;,&q;toc&q;:[{&q;id&q;:&q;力扣中的-n-queens&q;,&q;title&q;:&q;力扣中的 n queens&q;,&q;index&q;:&q;1&q;,&q;children&q;:[{&q;id&q;:&q;暴力朴素解法&q;,&q;title&q;:&q;暴力朴素解法&q;,&q;index&q;:&q;1.1&q;},{&q;id&q;:&q;使用数组记录&q;,&q;title&q;:&q;使用数组记录&q;,&q;index&q;:&q;1.2&q;},{&q;id&q;:&q;使用位运算进行状态压缩&q;,&q;title&q;:&q;使用位运算进行状态压缩&q;,&q;index&q;:&q;1.3&q;}]},{&q;id&q;:&q;洛谷中的-八皇后&q;,&q;title&q;:&q;洛谷中的 八皇后&q;,&q;index&q;:&q;2&q;},{&q;id&q;:&q;推荐文章&q;,&q;title&q;:&q;推荐文章&q;,&q;index&q;:&q;3&q;}],&q;copyright&q;:{&q;author&q;:&q;Mvbbb&q;,&q;link&q;:&q;&l;a href=\&q;https://mvbbb.github.io/ehshi7/\&q; title=\&q;八皇后问题\&q;&g;https://mvbbb.github.io/ehshi7/&l;/a&g;&q;,&q;license&q;:&q;Attribution-NonCommercial-NoDerivatives 4.0 International (&l;a href=\&q;https://creativecommons.org/licenses/by-nc-sa/4.0/\&q; rel=\&q;external nofollow noopener\&q; target=\&q;_blank\&q;&g;CC BY-NC-ND 4.0&l;/a&g;)&q;}}}</script></head><body lang="en"><div style="display:none"><script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279526637&amp;web_id=1279526637"></script></div>
<!-- hexo injector head_end start --><link href="//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat" rel="stylesheet"><link href="/styles.43478ea7e28ed563c48b.css" rel="stylesheet">
<script src="/config.f667b9e14173c512056d.js"></script>

<link rel="stylesheet" href="/theme.6191587147d30da44d8f.css" is="theme">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0">
<!-- hexo injector body_begin start --><is-a class="φbm φk" ng-version="10.0.11"><is-l class="φeb φh"><div class="φel"><section class="φem"><header class="φec φf"><!----><is-c class="φed"><img draggable="false" class="φbw φw" src="images/avatar.jpg" alt="" title="" width="160" height="160"></is-c><!----><a href="" class="φef φa φu">Mvbbb</a><p class="φee">Who i am,who u are</p></header><div class="φeq φf"><a routerlink="/archives" class="φer φu" href="/archives"><span class="φd">45</span><span>Archives</span></a><a class="φer φu" href="/categories/Java"><span class="φd">14</span><span>Categories</span></a><!----><a routerlink="/tags" class="φer φu" href="/tags"><span class="φd">34</span><span>Tags</span></a><!----></div><!----><nav class="φen"><a class="φeo φbd φj φc φu φo" href="/">Home</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/about">About</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/search">Search</a><!----><!----><!----><!----><a target="_blank" rel="external nofollow noopener" class="φeo φbd φj φc φu φo" href="https://www.yuque.com/u1296515/zb4bwb">Yuque</a><!----><!----><!----></nav><!----><!----></section><footer class="φeg φeh"><div class="φej"><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-email" href="mailto:3212618781@qq.com">email</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-feed" href="https://mvbbb.github.io/rss2.xml">feed</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-github" href="https://github.com/Mvbbb">github</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-myspace" href="/links">myspace</a><!----></div><!----><p class="φbk φz">© 2019-2021 ❤ <a href="https://github.com/Mvbbb">Mvbbb</a></p><!----><!----><!----></footer></div></is-l><div class="φbo"><div class="φbn"><div class="φbs φbe"><main class="φbr φbf"><router-outlet></router-outlet><is-s class="φfx φf"><header class="φgh φgi" style="background-image:;background-color:;"><div class="φgq"><h1 class="φgt">八皇后问题</h1><!----><p class="φgj φr"><span class="φgk φgo">Oct 8, 2020</span><a class="φgk φgm φu" href="/categories/%E5%A4%87%E6%88%98%E8%93%9D%E6%A1%A5%E6%9D%AF">备战蓝桥杯</a><!----><!----><!----></p><!----><!----></div></header><article itemscope="" itemtype="http://schema.org/Article" class="φga" data-title="八皇后问题"><div itemprop="articleBody" issnippet="" iszoomable="" class="φbk φh φz"><p>题目链接 <a href="https://www.luogu.com.cn/problem/P1219" target="_blank" rel="external nofollow noopener">P1219 [USACO1.5]八皇后 Checker Challenge</a><br>
力扣题目链接 <a href="https://leetcode-cn.com/problems/n-queens/" target="_blank" rel="external nofollow noopener">N Queens</a><br>
这是一道经典的搜索题目</p>
<h1 id="力扣中的-n-queens">力扣中的 n queens<a title="#力扣中的-n-queens" href="#力扣中的-n-queens"></a></h1>
<h2 id="暴力朴素解法">暴力朴素解法<a title="#暴力朴素解法" href="#暴力朴素解法"></a></h2>
<p>使用到了回溯</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">backtracking() {</span><br><span class="line">    <span class="keyword">if</span> (终止条件) {</span><br><span class="line">        存放结果;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (枚举同一个位置的所有可能性，可以想成节点孩子的数量) {</span><br><span class="line">        递归，处理节点;</span><br><span class="line">        backtracking();</span><br><span class="line">        回溯，撤销处理结果</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">作者：carlsun<span class="number">-2</span></span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/n-queens/solution/51-n-queenshui-su-fa-jing-dian-wen-ti-xiang-jie-by/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; solveNQueens(<span class="keyword">int</span> n) {</span><br><span class="line">        List&lt;List&lt;String&gt;&gt; res=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">char</span>[][] board = <span class="keyword">new</span> <span class="keyword">char</span>[n][n];</span><br><span class="line">        init(board);</span><br><span class="line">        helper(board,res,<span class="number">0</span>); <span class="comment">// 从第0行开始</span></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">helper</span><span class="params">(<span class="keyword">char</span>[][] board, List&lt;List&lt;String&gt;&gt; res, <span class="keyword">int</span> rowIndex)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(rowIndex==board.length){ <span class="comment">// 越过最后一行了</span></span><br><span class="line">            res.add(generate(board));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 遍历这一行的每一个位置</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> colIndex=<span class="number">0</span>;colIndex&lt;board.length;colIndex++){</span><br><span class="line">            <span class="keyword">if</span>(isValid(board,rowIndex,colIndex)){</span><br><span class="line">                board[rowIndex][colIndex]=<span class="string">'Q'</span>;</span><br><span class="line">                helper(board, res, rowIndex+<span class="number">1</span>);;</span><br><span class="line">                board[rowIndex][colIndex]=<span class="string">'.'</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">generate</span><span class="params">(<span class="keyword">char</span>[][] board)</span> </span>{</span><br><span class="line">        List&lt;String&gt; list=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span>[] row:board){</span><br><span class="line">            StringBuffer sb=<span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">char</span> c:row)</span><br><span class="line">                sb.append(c);</span><br><span class="line">            list.add(sb.toString());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// true 可用, false 不可用</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(<span class="keyword">char</span>[][] board, <span class="keyword">int</span> rowIndex, <span class="keyword">int</span> colIndex)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=rowIndex-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">            <span class="keyword">if</span>(board[i][colIndex]==<span class="string">'Q'</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 主对角线(只包含当前位置的上半部分)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=rowIndex-<span class="number">1</span>,j=colIndex-<span class="number">1</span>;i&gt;=<span class="number">0</span>&amp;&amp;j&gt;=<span class="number">0</span>;i--,j--){</span><br><span class="line">            <span class="keyword">if</span>(board[i][j]==<span class="string">'Q'</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 副对角线(只包含当前位置的上半部分)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=rowIndex-<span class="number">1</span>,j=colIndex+<span class="number">1</span>;i&gt;=<span class="number">0</span>&amp;&amp;j&lt;board.length;i--,j++){</span><br><span class="line">            <span class="keyword">if</span>(board[i][j]==<span class="string">'Q'</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">char</span>[][] board)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;board.length;i++){</span><br><span class="line">            Arrays.fill(board[i],<span class="string">'.'</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="使用数组记录">使用数组记录<a title="#使用数组记录" href="#使用数组记录"></a></h2>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1602224086139-3c1d85ba-5ae8-4a13-be7c-e3eee65c6dcd.png#align=left&amp;display=inline&amp;height=270&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=540&amp;originWidth=960&amp;size=85739&amp;status=done&amp;style=none&amp;width=480" alt="image.png" class="φcx"></p>
<blockquote>
<p><a href="http://zxi.mytechroad.com/blog/searching/leetcode-51-n-queens/" target="_blank" rel="external nofollow noopener">http://zxi.mytechroad.com/blog/searching/leetcode-51-n-queens/</a></p>
</blockquote>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> {</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; solveNQueens(<span class="keyword">int</span> n) {</span><br><span class="line">        board=<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;(n,<span class="built_in">string</span>(n,<span class="string">'.'</span>)); <span class="comment">//初始化一个面板</span></span><br><span class="line">        cols=<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n,<span class="number">0</span>);</span><br><span class="line">        diag1=<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">2</span>*n<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">        diag2=<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">2</span>*n<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">        nqueens(n,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; board; <span class="comment">// 保存面板</span></span><br><span class="line">    <span class="comment">/*第i个位置是否可用, 每次加入皇后都会修改这里的状态*/</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; cols; <span class="comment">// 该列是否被占用</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; diag1; <span class="comment">// 该对角线是否被占用 (平行于主对角线)</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; diag2; <span class="comment">// (偏向于副对角线)</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; res;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isOk</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">        <span class="keyword">return</span> !cols[x]&amp;&amp;!diag1[x+y]&amp;&amp;!diag2[x-y+n<span class="number">-1</span>];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*在board的某个位置加入或者删除皇后都会改变3个状态数组的状态*/</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateBoard</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> n,<span class="keyword">bool</span> is_put)</span></span>{</span><br><span class="line">        cols[x]=is_put;</span><br><span class="line">        diag1[x+y]=is_put;</span><br><span class="line">        diag2[x-y+n<span class="number">-1</span>]=is_put;</span><br><span class="line">        board[x][y]=is_put?<span class="string">'Q'</span>:<span class="string">'.'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">nqueens</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> n,<span class="keyword">const</span> <span class="keyword">int</span> y)</span></span>{ <span class="comment">//大小 行</span></span><br><span class="line">        <span class="keyword">if</span>(y==n){</span><br><span class="line">            res.push_back(board);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;n;x++){</span><br><span class="line">            <span class="keyword">if</span>(isOk(x,y,n)){</span><br><span class="line">                updateBoard(x,y,n,<span class="literal">true</span>);</span><br><span class="line">                nqueens(n,y+<span class="number">1</span>);</span><br><span class="line">                updateBoard(x,y,n,<span class="literal">false</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>时间复杂度 <img src="https://cdn.nlark.com/yuque/__latex/1dfc0dc62ab0b72188128f273546f6b4.svg#card=math&amp;code=O%28n%21%29&amp;height=20&amp;width=41" alt=""><br>
空间复杂度 <img src="https://cdn.nlark.com/yuque/__latex/7ba55e7c64a9405a0b39a1107e90ca94.svg#card=math&amp;code=O%28n%29%0A&amp;height=20&amp;width=36" alt="">&nbsp; 取决于皇后的数量, 递归调用的层数不会超过 <img src="https://cdn.nlark.com/yuque/__latex/8d9c307cb7f3c4a32822a51922d1ceaa.svg#card=math&amp;code=N&amp;height=16&amp;width=15" alt=""></p>
<h2 id="使用位运算进行状态压缩">使用位运算进行状态压缩<a title="#使用位运算进行状态压缩" href="#使用位运算进行状态压缩"></a></h2>
<p>优点降低了空间复杂度</p>
<blockquote>
<p><a href="https://leetcode-cn.com/problems/n-queens/solution/nhuang-hou-by-leetcode-solution/" target="_blank" rel="external nofollow noopener">https://leetcode-cn.com/problems/n-queens/solution/nhuang-hou-by-leetcode-solution/</a></p>
</blockquote>
<h1 id="洛谷中的-八皇后">洛谷中的 八皇后<a title="#洛谷中的-八皇后" href="#洛谷中的-八皇后"></a></h1>
<p>同力扣, 使用 ‘Q’ 代表该位置有皇后, ‘.’ 代表该位置没有皇后<br>
洛谷中的下标是从 1 开始的</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,res;</span><br><span class="line"><span class="keyword">int</span> cols[maxn];</span><br><span class="line"><span class="keyword">int</span> diag1[maxn*<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> diag2[maxn*<span class="number">2</span>];</span><br><span class="line"><span class="keyword">char</span> board[maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isOk</span><span class="params">(<span class="keyword">int</span> row_index,<span class="keyword">int</span> col_index)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> !cols[col_index]&amp;&amp;!diag1[col_index+row_index]&amp;&amp;!diag2[row_index-col_index+n];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> row_index,<span class="keyword">int</span> col_index,<span class="keyword">bool</span> to)</span></span>{</span><br><span class="line">    cols[col_index]=to;</span><br><span class="line">    diag1[col_index+row_index]=to;</span><br><span class="line">    diag2[row_index-col_index+n]=to;</span><br><span class="line">    board[row_index][col_index]=to?<span class="string">'Q'</span>:<span class="string">'.'</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_board</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++){</span><br><span class="line">            <span class="keyword">if</span>(board[i][j]==<span class="string">'Q'</span>)</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;j&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> row_index)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(row_index==n+<span class="number">1</span>){</span><br><span class="line">        res++;</span><br><span class="line">        <span class="keyword">if</span>(res&lt;=<span class="number">3</span>){</span><br><span class="line">            print_board();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> col_index=<span class="number">1</span>;col_index&lt;=n;col_index++){</span><br><span class="line">        <span class="keyword">if</span>(isOk(row_index,col_index)){</span><br><span class="line">            update(row_index,col_index,<span class="literal">true</span>);</span><br><span class="line">            solve(row_index+<span class="number">1</span>);</span><br><span class="line">            update(row_index,col_index,<span class="literal">false</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="built_in">memset</span>(board,<span class="string">'.'</span>,<span class="keyword">sizeof</span>(board));</span><br><span class="line">    solve(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div><h1 id="推荐文章">推荐文章<a title="#推荐文章" href="%e6%8e%a8%e8%8d%90%e6%96%87%e7%ab%a0"></a></h1><ul><li><a href="https://mvbbb.github.io/lvkhi9/">洛谷【搜索】暴力专项训练</a></li><li><a href="https://mvbbb.github.io/nftmte/">位运算</a></li><li><a href="https://mvbbb.github.io/wu5oin/">kuangbin 题单</a></li><li><a href="https://mvbbb.github.io/wdmukq/">挑战程序设计竞赛-习题</a></li><li><a href="https://lailin.xyz/post/defer.html">Go数据结构与算法05-栈下: 深入理解 defer</a></li></ul></div></div><is-f class="φcc φv φs"><!----><ul class="φcg"><li class="φce"><strong class="φcf">Author<span>:</span></strong><p class="φcd">Mvbbb</p></li><li class="φce"><strong class="φcf">Link<span>:</span></strong><p class="φcd"><a href="https://mvbbb.github.io/ehshi7/" title="八皇后问题">https://mvbbb.github.io/ehshi7/</a></p></li><li class="φce"><strong class="φcf">Copyright<span>:</span></strong><p class="φcd">Attribution-NonCommercial-NoDerivatives 4.0 International (<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener" target="_blank">CC BY-NC-ND 4.0</a>)</p></li><!----></ul><!----></is-f><!----><!----><!----></article><footer class="φgb φh"><div class="φgg"><is-m class="φet"><a class="φeu φs φq" href="/tags/%E7%AE%97%E6%B3%95">算法</a></is-m><!----></div><!----><div class="φgc"><a class="φgd φgf φu" href="/lvkhi9">洛谷【搜索】暴力专项训练</a><!----><a class="φgd φge φu" href="/lgv9s5">博客文章发布BUG记录</a><!----></div><!----></footer><is-e class="φbz φh"><div issnippet="" class="φbh"><div id="tcomment"></div>


</div><!----><!----><!----><!----></is-e><!----><!----><!----></is-s><!----></main><!----></div></div></div><is-g class="φch"><div class="φcq"><span class="φbg icon-up"></span><span class="φbg icon-down"></span><!----><span class="φbg icon-toc"></span><!----><span class="φbg icon-search"></span><!----></div><div class="φcj φck"><svg class="φcp"><defs><filter id="dp"><feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur></filter></defs><circle filter="url(#dp)" fill="rgba(0,0,0,.3)" cx="50%" cy="52%" r="44%"></circle><circle cx="50%" cy="50%" r="44%" class="φcl φbb"></circle><circle cx="50%" cy="50%" r="48%" class="φco φba" stroke-dasharray="0% 314.15926%"></circle><!----><g class="φcm"><circle r=".2rem" cx="0" cy="-.8rem"></circle><circle r=".2rem"></circle><circle r=".2rem" cx="0" cy=".8rem"></circle></g><!----></svg></div></is-g><is-n class="φev φf"><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">1 </span><!----><span class="φfc">力扣中的 n queens</span></a><div class="φex"><a class="φfa φu"><span class="φfb φd">1.1 </span><!----><span class="φfc">暴力朴素解法</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">1.2 </span><!----><span class="φfc">使用数组记录</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">1.3 </span><!----><span class="φfc">使用位运算进行状态压缩</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">2 </span><!----><span class="φfc">洛谷中的 八皇后</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">3 </span><!----><span class="φfc">推荐文章</span></a><!----></div><!----></is-n><!----><!----></is-a><!-- hexo injector body_begin end --><!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/twikoo@1.0.0/dist/twikoo.all.min.js"></script><script src="/runtime.b15aa7186c559b492b7d.js"></script><script src="/polyfills.824ff89b5f3ca4543a31.js"></script><script src="/main.03652fc423a687c817e8.js"></script><!-- hexo injector body_end end -->

</body></html>