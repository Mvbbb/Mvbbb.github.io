<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="referrer" content="no-referrer">
<title>MySQL 基础 - Yu</title>
<base href="/">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<link rel="canonical" href="https://mvbbb.github.io/zwggs9/">
<link rel="icon" type="image/x-icon" href="/images/web.png">

<meta name="description" content="练习网站 学习 MySQL 这一篇就够了 SQL 教程 MySQL 教程">
<meta property="og:type" content="website">
<meta property="og:title" content="MySQL 基础">
<meta property="og:url" content="https://mvbbb.github.io/zwggs9/index.html">
<meta property="og:site_name" content="Yu">
<meta property="og:description" content="练习网站 学习 MySQL 这一篇就够了 SQL 教程 MySQL 教程">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mvbbb.github.io/zwggs9/images/avatar.jpg">
<meta property="article:published_time" content="2020-09-19T03:49:05.000Z">
<meta property="article:modified_time" content="2021-02-03T04:21:00.225Z">
<meta property="article:author" content="Mvbbb">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mvbbb.github.io/zwggs9/images/avatar.jpg">
<script type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","publisher":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"url":"https://mvbbb.github.io","image":"https://mvbbb.github.io/images/avatar.jpg","description":"Who i am,who u are","author":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"}},{"@context":"http://schema.org","@type":"Article","articleSection":"数据库","url":"https://mvbbb.github.io/zwggs9/","headline":"MySQL 基础","image":"https://mvbbb.github.io/images/avatar.jpg","datePublished":"2020-09-19T03:49:05.000Z","dateModified":"2021-02-03T04:21:00.225Z","keywords":"MySQL,SQL","description":"练习网站 学习 MySQL 这一篇就够了\nSQL 教程 MySQL 教程","publisher":{"@type":"Organization","name":"Yu","logo":{"@type":"ImageObject","url":"https://mvbbb.github.io/images/avatar.jpg"}},"author":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mvbbb.github.io/zwggs9/"}}]</script><link rel="alternate" type="application/atom+xml" title="Yu" href="/rss2.xml">
<script async="" src="//www.googletagmanager.com/gtag/js?id=UA-160027215-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-160027215-1');</script>
<meta name="theme-color" content=""><script type="application/json" is="state">{&q;api/endnZ3M5.json&q;:{&q;title&q;:&q;MySQL 基础&q;,&q;date&q;:&q;2020-09-19T03:49:05.000Z&q;,&q;date_formatted&q;:{&q;ll&q;:&q;Sep 19, 2020&q;,&q;L&q;:&q;09/19/2020&q;,&q;MM-DD&q;:&q;09-19&q;},&q;link&q;:&q;zwggs9&q;,&q;comments&q;:true,&q;tags&q;:[&q;MySQL&q;,&q;SQL&q;],&q;categories&q;:[&q;数据库&q;],&q;updated&q;:&q;2021-02-03T04:21:00.225Z&q;,&q;content&q;:&q;&l;p&g;&l;a href=\&q;https://sqlzoo.net/\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;练习网站&l;/a&g; &l;a href=\&q;https://blog.csdn.net/qq_38490457/article/details/107640904\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;学习 MySQL 这一篇就够了&l;/a&g;&l;br&g;\n&l;a href=\&q;https://www.runoob.com/sql/sql-tutorial.html\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;SQL 教程&l;/a&g; &l;a href=\&q;https://www.runoob.com/mysql/mysql-tutorial.html\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;MySQL 教程&l;/a&g;&l;/p&g;\n&l;a id=\&q;more\&q;&g;&l;/a&g;\n&l;h1 id=\&q;mysql-命令\&q;&g;MySQL 命令&l;a title=\&q;#mysql-命令\&q; href=\&q;#mysql-命令\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;表中具有几个概念：列、行、主键。 列叫做字段(Column),行叫做表中的记录,每一个字段都有:字段名称/字段数据类型/字段约束/字段长度&l;/p&g;\n&l;p&g;&l;strong&g;那么 SQL 语句包括增删改查，SQL 语句怎么分类呢？&l;/strong&g;&l;/p&g;\n&l;ol&g;\n&l;li&g;DQL（数据查询语言 Data Query Language）: 查询语句，凡是 select 语句都是 DQL。&l;/li&g;\n&l;li&g;DML（数据操作语言 Data Manipulation Language）：insert delete update，对表当中的数据进行增删改。&l;/li&g;\n&l;li&g;DDL（数据定义语言 Data Definition Language）：create drop alter，对表结构的增删改。&l;/li&g;\n&l;li&g;TCL（事务控制语言 Transactional Control Language）：commit 提交事务，rollback 回滚事务。(TCL 中的 T 是 Transaction)&l;/li&g;\n&l;li&g;DCL（数据控制语言 Data Control Language）: grant 授权、revoke 撤销权限等。&l;/li&g;\n&l;/ol&g;\n&l;p&g;&l;strong&g;常见 SQL 命令&l;/strong&g;&l;br&g;\nshow datebases;&l;br&g;\ncreate database &l;dbname&g;;&l;br&g;\nuse &l;dbname&g;;&l;br&g;\nshow tables;&l;br&g;\n删除数据库：drop database &l;dbname&g;;&l;br&g;\n查看表结构: desc &l;tablename&g;;&l;br&g;\n查看表内容:  select * from &l;tablename&g;;&l;br&g;\n查看 MySQL 版本: select version();&l;br&g;\n查看当前数据库名称: select database();&l;br&g;\n退出: exit;&l;br&g;\n查看别的数据库的表: show tables from &l;database&g;;&l;br&g;\n查看创建表的语句：show create table &l;tablename&g;;&l;/p&g;\n&l;p&g;&l;strong&g;什么是 sql 脚本呢？&l;/strong&g;&l;br&g;\n当一个文件的扩展名是.sql，并且该文件中编写了大量的 sql 语句，我们称这样的文件为 sql 脚本。&l;br&g;\n注意：直接使用 source 命令可以执行 sql 脚本。&l;br&g;\nsql 脚本中的数据量太大的时候，无法打开，请使用 source 命令完成初始化。&l;/p&g;\n&l;h1 id=\&q;基本-select\&q;&g;基本 SELECT&l;a title=\&q;#基本-select\&q; href=\&q;#基本-select\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;&l;strong&g;简单的查询语句:&l;/strong&g;&l;br&g;\n语法格式：  select 字段名 1,字段名 2,字段名 3,… from 表名;&l;/p&g;\n&l;blockquote&g;\n&l;p&g;sql 语句不区分大小写。&l;/p&g;\n&l;/blockquote&g;\n&l;p&g;查询员工的年薪？（字段可以参与数学运算。）&l;br&g;\n&l;code&g;select ename,sal * 12 from emp;&l;/code&g; &l;br&g;\n  给查询结果的列重命名？&l;br&g;\n&l;code&g;select ename,sal * 12 as yearsal from emp;&l;/code&g; &l;br&g;\n  别名中有中文？&l;br&g;\n&l;code&g;select ename,sal * 12 as 年薪 from emp; // 错误&l;/code&g; &l;br&g;\n&l;code&g;select ename,sal * 12 as &s;年薪&s; from emp;&l;/code&g; &l;br&g;\n注意：标准 sql 语句中要求字符串使用单引号括起来。虽然 mysql 支持双引号，尽量别用。&l;br&g;\nas 关键字可以省略？&l;br&g;\n&l;code&g;mysql&a;gt; select empno,ename,sal * 12 yearsal from emp;&l;/code&g;&l;/p&g;\n&l;p&g;条件查询需要用到 where 语句，where 必须放到 from 语句表的后面&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1600517549715-eab7ed18-fa4e-4dae-b58e-744ec8dc8b93.png#align=left&a;amp;display=inline&a;amp;height=258&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=516&a;amp;originWidth=1081&a;amp;size=51351&a;amp;status=done&a;amp;style=none&a;amp;width=540.5\&q; alt=\&q;image.png\&q;&g;&l;/p&g;\n&l;p&g;在数据库当中 NULL 不是一个值，代表什么也没有，为空。&l;br&g;\n空不是一个值，不能用等号衡量。&l;br&g;\n&l;strong&g;必须使用 is null 或者 is not null&l;/strong&g;&l;/p&g;\n&l;p&g;and 和 or 联合起来用：找出薪资大于 1000 的并且部门编号是 20 或 30 部门的员工。&l;br&g;\n&l;code&g;select ename,sal,deptno from emp where sal &a;gt; 1000 and deptno = 20 or deptno = 30; // 错误的&l;/code&g; &l;br&g;\n&l;code&g;select ename,sal,deptno from emp where sal &a;gt; 1000 and (deptno = 20 or deptno = 30); // 正确的。&l;/code&g; &l;br&g;\n**   注意：当运算符的优先级不确定的时候加小括号。**&l;br&g;\nin 等同于 or：&l;br&g;\n&l;code&g;select ename,job from emp where job in(&s;SALESMAN&s;, &s;MANAGER&s;);&l;/code&g;&l;/p&g;\n&l;p&g;*&l;em&g;模糊查询 like **&l;br&g;\n找出名字当中含有 O 的？&l;br&g;\n   （在模糊查询当中，必须掌握两个特殊的符号，一个是%，一个是&l;/em&g;）&l;br&g;\n   %代表任意多个字符，*代表任意 1 个字符。&l;br&g;\n   &l;code&g;select ename from emp where ename like &s;%O%&s;;&l;/code&g; &l;br&g;\n找出名字中第二个字母是 A 的？&l;br&g;\n&l;code&g;select ename from emp where ename like &s;_A%&s;;&l;/code&g; &l;br&g;\n找出名字中最后一个字母是 T 的？&l;br&g;\n&l;code&g;select ename from emp where ename like &s;%T&s;;&l;/code&g; &l;br&g;\n查询结果去重 &l;code&g;distinct&l;/code&g;  distinct 只能出现在所有字段的最前面。&l;br&g;\n&l;code&g;select distinct job from emp;&l;/code&g;&l;/p&g;\n&l;h1 id=\&q;排序-order-by\&q;&g;排序 ORDER BY&l;a title=\&q;#排序-order-by\&q; href=\&q;#排序-order-by\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;默认是升序. asc 表示升序，desc 表示降序。&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; ename , sal &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g; sal; &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 升序&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; ename , sal &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g; sal &l;span class=\&q;keyword\&q;&g;asc&l;/span&g;; &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 升序&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; ename , sal &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g; sal &l;span class=\&q;keyword\&q;&g;desc&l;/span&g;; &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 降序。&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;按照工资的降序排列，当工资相同的时候再按照名字的升序排列。&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; ename,sal &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g; sal &l;span class=\&q;keyword\&q;&g;desc&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; ename,sal &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g; sal &l;span class=\&q;keyword\&q;&g;desc&l;/span&g; , ename &l;span class=\&q;keyword\&q;&g;asc&l;/span&g;;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;注意：越靠前的字段越能起到主导作用。只有当前面的字段无法完成排序的时候，才会启用后面的字段。&l;br&g;\norder by 是最后执行的&l;/p&g;\n&l;h1 id=\&q;分组/聚合函数\&q;&g;分组/聚合函数&l;a title=\&q;#分组/聚合函数\&q; href=\&q;#分组/聚合函数\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;&l;strong&g;count 计数, sum 求和, avg 平均值, max 最大值, min 最小值&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; &l;span class=\&q;built_in\&q;&g;sum&l;/span&g;(sal) &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;where&l;/span&g; JOB&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;string\&q;&g;&a;#x27;CLERK&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;所有的分组函数都是对“某一组”数据进行操作的。&l;/strong&g;&l;br&g;\n找出工资总和？&l;br&g;\n select sum(sal) from emp;&l;br&g;\n找出最高工资？&l;br&g;\n select max(sal) from emp;&l;br&g;\n找出最低工资？&l;br&g;\n select min(sal) from emp;&l;br&g;\n找出平均工资？&l;br&g;\n select avg(sal) from emp;&l;br&g;\n找出总人数？&l;br&g;\n select count(*) from emp;&l;br&g;\n select count(ename) from emp;&l;br&g;\n分组函数一共 5 个。&l;br&g;\n分组函数还有另一个名字：多行处理函数。&l;br&g;\n多行处理函数的特点：输入多行，最终输出的结果是 1 行。&l;br&g;\n分组函数自动忽略 NULL。&l;/p&g;\n&l;p&g;所有数据库都是这样规定的，&l;strong&g;只要有 NULL 参与的运算结果一定是 NULL。&l;/strong&g;&l;br&g;\n使用 ifnull 函数：ifnull(可能为 NULL 的数据,被当做什么处理) ： 属于单行处理函数。&l;br&g;\n&l;code&g;select ename,(sal+ifnull(comm,0))*12 as yearsal from emp;&l;/code&g; &l;br&g;\nsum 函数自动忽略 null&l;/p&g;\n&l;p&g;&l;strong&g;分组函数也能组合起来用：&l;/strong&g;&l;br&g;\n&l;code&g;select count(*),sum(sal),avg(sal),max(sal),min(sal) from emp;&l;/code&g;&l;/p&g;\n&l;p&g;&l;strong&g;count(*)和 count(具体的某个字段)，他们有什么区别？&l;/strong&g;&l;br&g;\ncount(*):不是统计某个字段中数据的个数，而是统计总记录条数。（和某个字段无关）&l;br&g;\ncount(comm): 表示统计 comm 字段中不为 NULL 的数据总数量。&l;/p&g;\n&l;p&g;&l;strong&g;group by ： 按照某个字段或者某些字段进行分组。&l;/strong&g;&l;br&g;\n&l;strong&g;having : having 是对分组之后的数据进行再次过滤。&l;/strong&g;&l;br&g;\n注意：分组函数一般都会和 group by 联合使用，这也是为什么它被称为分组函数的原因。&l;br&g;\n&l;strong&g;并且任何一个分组函数（count sum avg max min）都是在 group by 语句执行结束之后才会执行的。&l;/strong&g;&l;br&g;\n当一条 sql 语句没有 group by 的话，整张表的数据会自成一组。&l;br&g;\n为什么 where 里面不能用分组函数 &l;code&g;where avl(sal)&a;gt; 10;&l;/code&g; ?&l;br&g;\n因为只有等 where 执行之后~~ group by 才能执行~~, 之后才会去分组函数, 在组内运算.&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;5&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t..&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;from&l;/span&g;\t\t\t&l;span class=\&q;number\&q;&g;1&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t..&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;where&l;/span&g;\t\t\t&l;span class=\&q;number\&q;&g;2&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t..&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;group&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;3&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t..&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;having&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;4&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t..&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;6&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t..&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;记住一个规则：当一条语句中有 group by 的话，select 后面只能跟分组函数和参与分组的字段。&l;/strong&g;&l;/p&g;\n&l;h1 id=\&q;分组查询\&q;&g;分组查询&l;a title=\&q;#分组查询\&q; href=\&q;#分组查询\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;分组查询主要涉及到两个子句，分别是：group by 和 having&l;br&g;\n一个完整的 select 语句格式如下&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; 字段&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;from&l;/span&g; 表名&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;where&l;/span&g; …….&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;group&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g; ……..&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;having&l;/span&g; …….(就是为了过滤分组后的数据而存在的—不可以单独的出现)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g; ……..&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;以上语句的执行顺序&l;/p&g;\n&l;ol&g;\n&l;li&g;首先执行 where 语句过滤原始数据&l;/li&g;\n&l;li&g;执行 group by 进行分组&l;/li&g;\n&l;li&g;执行 having 对分组数据进行操作&l;/li&g;\n&l;li&g;执行 select 选出数据&l;/li&g;\n&l;li&g;执行 order by 排序&l;br&g;\n原则：能在 where 中过滤的数据，尽量在 where 中过滤，效率较高。having 的过滤是专门对分组之后的数据进行过滤的。&l;/li&g;\n&l;/ol&g;\n&l;h1 id=\&q;连接查询-join\&q;&g;连接查询 JOIN&l;a title=\&q;#连接查询-join\&q; href=\&q;#连接查询-join\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;在表的连接查询方面有一种现象被称为：笛卡尔积现象。&l;br&g;\n笛卡尔积现象：当两张表进行连接查询的时候，没有任何条件进行限制，最终的查询结果条数是两张表记录条数的乘积。&l;/p&g;\n&l;p&g;关于表的别名：&l;br&g;\n&l;code&g;select e.ename,d.dname from emp e,dept d;&l;/code&g; &l;br&g;\n表的别名有什么好处？&l;br&g;\n  第一：执行效率高。&l;br&g;\n  第二：可读性好。&l;br&g;\n&l;strong&g;内连接中的等值连接&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\te.ename,d.dname&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;from&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\temp e&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;join&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tdept d&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;on&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\te.deptno &l;span class=\&q;operator\&q;&g;=&l;/span&g; d.deptno;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;内连接的非等值连接&l;/strong&g;&l;br&g;\n工资-&a;gt;工资等级&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;mysql&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;select&l;/span&g; e.ename , e.sal,s.grade&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;operator\&q;&g;-&l;/span&g;&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp e&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;operator\&q;&g;-&l;/span&g;&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;join&l;/span&g; salgrade s&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;operator\&q;&g;-&l;/span&g;&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;on&l;/span&g; e.sal &l;span class=\&q;keyword\&q;&g;between&l;/span&g; s.losal &l;span class=\&q;keyword\&q;&g;and&l;/span&g; s.hisal;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;自连接: 一张表看出两张不同的表&l;/strong&g;&l;br&g;\n&l;strong&g;什么是外连接，和内连接有什么区别？&l;/strong&g;&l;br&g;\n内连接：&l;br&g;\n  假设 A 和 B 表进行连接，使用内连接的话，凡是 A 表和 B 表能够匹配上的记录查询出来，这就是内连接。&l;br&g;\n AB 两张表没有主副之分，两张表是平等的。&l;br&g;\n外连接：&l;br&g;\n  假设 A 和 B 表进行连接，使用外连接的话，AB 两张表中有一张表是主表，一张表是副表，主要查询主表中&l;br&g;\n  的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，副表自动模拟出 NULL 与之匹配。&l;/p&g;\n&l;p&g;外连接的分类？&l;br&g;\n  左外连接（左连接）：表示左边的这张表是主表。&l;br&g;\n  右外连接（右连接）：表示右边的这张表是主表。&l;br&g;\n  左连接有右连接的写法，右连接也会有对应的左连接的写法。&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;外连接：（右外连接&l;span class=\&q;operator\&q;&g;/&l;/span&g;右连接）&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\ta.ename &l;span class=\&q;string\&q;&g;&a;#x27;员工&a;#x27;&l;/span&g;, b.ename &l;span class=\&q;string\&q;&g;&a;#x27;领导&a;#x27;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;from&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\temp b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;right&l;/span&g; &l;span class=\&q;keyword\&q;&g;join&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\temp a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;on&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\ta.mgr &l;span class=\&q;operator\&q;&g;=&l;/span&g; b.empno;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h1 id=\&q;union-并集\&q;&g;UNION 并集&l;a title=\&q;#union-并集\&q; href=\&q;#union-并集\&q;&g;&l;/a&g;&l;/h1&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; &l;span class=\&q;operator\&q;&g;*&l;/span&g; &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;where&l;/span&g; job&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;string\&q;&g;&a;#x27;MANAGER&a;#x27;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;union&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; &l;span class=\&q;operator\&q;&g;*&l;/span&g; &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;where&l;/span&g; job&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;string\&q;&g;&a;#x27;SALESMAN&a;#x27;&l;/span&g;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;合并结果集的时候，需要查询字段对应个数相同。在 Oracle 中更严格，不但要求个数相同，而且还要求类型对应相同。&l;/p&g;\n&l;h1 id=\&q;limit-的使用\&q;&g;LIMIT 的使用&l;a title=\&q;#limit-的使用\&q; href=\&q;#limit-的使用\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;&l;code&g;select * from table limit m,n&l;/code&g; &l;br&g;\n其中 m 是指记录开始的 index，从 0 开始，表示第一条记录&l;br&g;\nn 是指从第 m+1 条开始，取 n 条。&l;br&g;\n&l;code&g;select * from tablename limit 2,4&l;/code&g; &l;br&g;\n即取出第 3 条至第 6 条，4 条记录&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;limit是&l;span class=\&q;keyword\&q;&g;sql&l;/span&g;语句最后执行的一个环节：&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;select&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;5&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t...&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;from&l;/span&g;\t\t\t&l;span class=\&q;number\&q;&g;1&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t...&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;where&l;/span&g;\t\t\t&l;span class=\&q;number\&q;&g;2&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t...&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;group&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;3&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t...&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;having&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;4&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t...&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;order&l;/span&g; &l;span class=\&q;keyword\&q;&g;by&l;/span&g;\t\t&l;span class=\&q;number\&q;&g;6&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t...&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tlimit\t\t\t&l;span class=\&q;number\&q;&g;7&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t...;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;分页的 sql 语句 &l;code&g;limit (PageNo-1)*PageSize, PageSize;&l;/code&g;&l;/p&g;\n&l;h1 id=\&q;表\&q;&g;表&l;a title=\&q;#表\&q; href=\&q;#表\&q;&g;&l;/a&g;&l;/h1&g;\n&l;h2 id=\&q;创建表\&q;&g;创建表&l;a title=\&q;#创建表\&q; href=\&q;#创建表\&q;&g;&l;/a&g;&l;/h2&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; tableName(&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   columnName dataType(length),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   ………………..&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   columnName dataType(length)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;set&l;/span&g; character_set_results&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;string\&q;&g;&a;#x27;gbk&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;show&l;/span&g; variables &l;span class=\&q;keyword\&q;&g;like&l;/span&g; &l;span class=\&q;string\&q;&g;&a;#x27;%char%&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;创建表的时候，表中有字段，每一个字段有：&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;     &l;span class=\&q;operator\&q;&g;*&l;/span&g; 字段名&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;     &l;span class=\&q;operator\&q;&g;*&l;/span&g; 字段数据类型&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;     &l;span class=\&q;operator\&q;&g;*&l;/span&g; 字段长度限制&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;     &l;span class=\&q;operator\&q;&g;*&l;/span&g; 字段约束&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;常用数据类型&l;/strong&g;&l;br&g;\n int   整数型 (java 中的 int)&l;br&g;\n bigint 长整型 (java 中的 long)&l;br&g;\n float   浮点型 (java 中的 float double)&l;br&g;\n char   定长字符串 (String)&l;br&g;\n varchar 可变长字符串 (StringBuffer/StringBuilder)&l;br&g;\n date   日期类型 （对应 Java 中的 java.sql.Date 类型）&l;br&g;\n BLOB   二进制大对象（存储图片、视频等流媒体信息） Binary Large OBject （对应 java 中的 Object）&l;br&g;\n CLOB   字符大对象（存储较大文本，比如，可以存储 4G 的字符串。）&l;br&g;\nCharacter Large OBject（对应 java 中的 Object）&l;/p&g;\n&l;h2 id=\&q;增/删/改-ddl\&q;&g;增/删/改 DDL&l;a title=\&q;#增/删/改-ddl\&q; href=\&q;#增/删/改-ddl\&q;&g;&l;/a&g;&l;/h2&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;删除表&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; if &l;span class=\&q;keyword\&q;&g;exists&l;/span&g; t_student;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;添加字段&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;alter&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_student &l;span class=\&q;keyword\&q;&g;add&l;/span&g;  contact_tel &l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;40&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;修改字段&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;alter&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_student modify student_name &l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;100&l;/span&g;) ;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;alter&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_student change sex gender &l;span class=\&q;type\&q;&g;char&l;/span&g;(&l;span class=\&q;number\&q;&g;2&l;/span&g;) &l;span class=\&q;keyword\&q;&g;not&l;/span&g; &l;span class=\&q;keyword\&q;&g;null&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;删除字段&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;alter&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_student &l;span class=\&q;keyword\&q;&g;drop&l;/span&g; contact_tel;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;增/删/改-dml\&q;&g;增/删/改 DML&l;a title=\&q;#增/删/改-dml\&q; href=\&q;#增/删/改-dml\&q;&g;&l;/a&g;&l;/h2&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;添加记录&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;insert&l;/span&g; &l;span class=\&q;keyword\&q;&g;into&l;/span&g; t_student(student_id, student_name, sex, birthday, email, classes_id) &l;span class=\&q;keyword\&q;&g;values&l;/span&g;(&l;span class=\&q;number\&q;&g;1001&l;/span&g;, &l;span class=\&q;string\&q;&g;&a;#x27;zhangsan&a;#x27;&l;/span&g;, &l;span class=\&q;string\&q;&g;&a;#x27;m&a;#x27;&l;/span&g;, &l;span class=\&q;string\&q;&g;&a;#x27;1988-01-01&a;#x27;&l;/span&g;, &l;span class=\&q;string\&q;&g;&a;#x27;qqq@163.com&a;#x27;&l;/span&g;, &l;span class=\&q;number\&q;&g;10&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;insert&l;/span&g; &l;span class=\&q;keyword\&q;&g;into&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;values&l;/span&g;(&l;span class=\&q;number\&q;&g;9999&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;zhangsan&a;#x27;&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;MANAGER&a;#x27;&l;/span&g;, &l;span class=\&q;keyword\&q;&g;null&l;/span&g;, &l;span class=\&q;keyword\&q;&g;null&l;/span&g;,&l;span class=\&q;number\&q;&g;3000&l;/span&g;, &l;span class=\&q;number\&q;&g;500&l;/span&g;, &l;span class=\&q;number\&q;&g;10&l;/span&g;);&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;如何插入日期：&l;/strong&g;&l;br&g;\n第一种方法，插入的日期格式和显示的日期格式一致&l;br&g;\n第二种方法，采用 str_to_date&l;br&g;\n第三种方法，添加系统日期（now()）&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;insert&l;/span&g; &l;span class=\&q;keyword\&q;&g;into&l;/span&g; emp(empno, ename, job, mgr, hiredate, sal, comm, deptno) &l;span class=\&q;keyword\&q;&g;values&l;/span&g;(&l;span class=\&q;number\&q;&g;9997&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;zhangsan&a;#x27;&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;MANAGER&a;#x27;&l;/span&g;, &l;span class=\&q;keyword\&q;&g;null&l;/span&g;, &l;span class=\&q;string\&q;&g;&a;#x27;1981-06-12&a;#x27;&l;/span&g;,&l;span class=\&q;number\&q;&g;3000&l;/span&g;, &l;span class=\&q;number\&q;&g;500&l;/span&g;, &l;span class=\&q;number\&q;&g;10&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;insert&l;/span&g; &l;span class=\&q;keyword\&q;&g;into&l;/span&g; emp(empno, ename, job, mgr, hiredate, sal, comm, deptno) &l;span class=\&q;keyword\&q;&g;values&l;/span&g;(&l;span class=\&q;number\&q;&g;9996&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;zhangsan&a;#x27;&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;MANAGER&a;#x27;&l;/span&g;,&l;span class=\&q;keyword\&q;&g;null&l;/span&g;,str_to_date(&l;span class=\&q;string\&q;&g;&a;#x27;1981-06-12&a;#x27;&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;%Y-%m-%d&a;#x27;&l;/span&g;),&l;span class=\&q;number\&q;&g;3000&l;/span&g;, &l;span class=\&q;number\&q;&g;500&l;/span&g;, &l;span class=\&q;number\&q;&g;10&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;insert&l;/span&g; &l;span class=\&q;keyword\&q;&g;into&l;/span&g; emp(empno, ename, job, mgr, hiredate, sal, comm, deptno) &l;span class=\&q;keyword\&q;&g;values&l;/span&g;(&l;span class=\&q;number\&q;&g;9995&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;zhangsan&a;#x27;&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;MANAGER&a;#x27;&l;/span&g;,&l;span class=\&q;keyword\&q;&g;null&l;/span&g;,now() ,&l;span class=\&q;number\&q;&g;3000&l;/span&g;, &l;span class=\&q;number\&q;&g;500&l;/span&g;, &l;span class=\&q;number\&q;&g;10&l;/span&g;);&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;表复制&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; emp_bak &l;span class=\&q;keyword\&q;&g;as&l;/span&g; &l;span class=\&q;keyword\&q;&g;select&l;/span&g; empno,ename,sal &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;以上方式，会自动创建表，将符合查询条件的数据自动复制到创建的表中&l;br&g;\n如何将查询的数据直接放到已经存在的表中，可以使用条件&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;insert&l;/span&g; &l;span class=\&q;keyword\&q;&g;into&l;/span&g; emp_bak &l;span class=\&q;keyword\&q;&g;select&l;/span&g; &l;span class=\&q;operator\&q;&g;*&l;/span&g; &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;where&l;/span&g; sal&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;number\&q;&g;3000&l;/span&g;;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;数据更新&l;/strong&g;&l;br&g;\n可以修改数据，可以根据条件修改数据&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;update&l;/span&g; 表名 &l;span class=\&q;keyword\&q;&g;set&l;/span&g; 字段名称&l;span class=\&q;number\&q;&g;1&l;/span&g;&l;span class=\&q;operator\&q;&g;=&l;/span&g;需要修改的值&l;span class=\&q;number\&q;&g;1&l;/span&g;, 字段名称&l;span class=\&q;number\&q;&g;2&l;/span&g;&l;span class=\&q;operator\&q;&g;=&l;/span&g;需要修改的值&l;span class=\&q;number\&q;&g;2&l;/span&g; &l;span class=\&q;keyword\&q;&g;where&l;/span&g; ……&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;数据删除&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;delete&l;/span&g; &l;span class=\&q;keyword\&q;&g;from&l;/span&g;表名 &l;span class=\&q;keyword\&q;&g;where&l;/span&g; 。。。。。&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;创建表加入约束\&q;&g;创建表加入约束&l;a title=\&q;#创建表加入约束\&q; href=\&q;#创建表加入约束\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;&l;strong&g;常见的约束&l;/strong&g;&l;br&g;\na) 非空约束，not null&l;br&g;\nb) 唯一约束，unique  &l;br&g;\nc) 主键约束，primary key&l;br&g;\nd) 外键约束，foreign key&l;br&g;\ne) 自定义检查约束，check（不建议使用）(在 mysql 中现在还不支持)&l;/p&g;\n&l;p&g;**非空约束，**针对某个字段设置其值不为空，如：学生的姓名不能为空&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; if &l;span class=\&q;keyword\&q;&g;exists&l;/span&g; t_student;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_student(&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tstudent_id  \t&l;span class=\&q;type\&q;&g;int&l;/span&g;(&l;span class=\&q;number\&q;&g;10&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tstudent_name \t&l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;20&l;/span&g;) &l;span class=\&q;keyword\&q;&g;not&l;/span&g; &l;span class=\&q;keyword\&q;&g;null&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tsex\t\t&l;span class=\&q;type\&q;&g;char&l;/span&g;(&l;span class=\&q;number\&q;&g;2&l;/span&g;)  &l;span class=\&q;keyword\&q;&g;default&l;/span&g;  &l;span class=\&q;string\&q;&g;&a;#x27;m&a;#x27;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tbirthday\t&l;span class=\&q;type\&q;&g;date&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\temail\t\t&l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;30&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tclasses_id\t&l;span class=\&q;type\&q;&g;int&l;/span&g;(&l;span class=\&q;number\&q;&g;3&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g;加入不符合约束条件的内容会报错&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;**唯一约束 unique **唯一性约束，它可以使某个字段的值不能重复，如：email 不能重复：[每个字段一个约束-列级约束]&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; if &l;span class=\&q;keyword\&q;&g;exists&l;/span&g; t_student;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_student(&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tstudent_id  \t&l;span class=\&q;type\&q;&g;int&l;/span&g;(&l;span class=\&q;number\&q;&g;10&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tstudent_name \t&l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;20&l;/span&g;) &l;span class=\&q;keyword\&q;&g;not&l;/span&g; &l;span class=\&q;keyword\&q;&g;null&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tsex\t\t&l;span class=\&q;type\&q;&g;char&l;/span&g;(&l;span class=\&q;number\&q;&g;2&l;/span&g;)  &l;span class=\&q;keyword\&q;&g;default&l;/span&g;  &l;span class=\&q;string\&q;&g;&a;#x27;m&a;#x27;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tbirthday\t&l;span class=\&q;type\&q;&g;date&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\temail\t\t&l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;30&l;/span&g;)  &l;span class=\&q;keyword\&q;&g;unique&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tclasses_id\t&l;span class=\&q;type\&q;&g;int&l;/span&g;(&l;span class=\&q;number\&q;&g;3&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;insert&l;/span&g; &l;span class=\&q;keyword\&q;&g;into&l;/span&g; t_student(student_id, student_name , sex, birthday, email, classes_id)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;values&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;(&l;span class=\&q;number\&q;&g;1001&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;zhangsan&a;#x27;&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;#x27;m&a;#x27;&l;/span&g;, &l;span class=\&q;string\&q;&g;&a;#x27;1988-01-01&a;#x27;&l;/span&g;, &l;span class=\&q;string\&q;&g;&a;#x27;qqq@163.com&a;#x27;&l;/span&g;, &l;span class=\&q;number\&q;&g;10&l;/span&g;)&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;给两个列或者多个列添加 unique [多个字段联合添加一个约束-表级约束]&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; if &l;span class=\&q;keyword\&q;&g;exists&l;/span&g; t_user;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_user(&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  \tid &l;span class=\&q;type\&q;&g;int&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  \tusercode &l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;255&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  \tusername &l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;255&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  \t&l;span class=\&q;keyword\&q;&g;unique&l;/span&g;(usercode,username) &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 多个字段联合起来添加&l;span class=\&q;number\&q;&g;1&l;/span&g;个约束&l;span class=\&q;keyword\&q;&g;unique&l;/span&g; 【表级约束】&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;);&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;注意：not null 约束只有列级约束。没有表级约束。&l;br&g;\n&l;strong&g;主键约束: 不为空且不能重复&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; if &l;span class=\&q;keyword\&q;&g;exists&l;/span&g; t_user;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_user(&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  id &l;span class=\&q;type\&q;&g;int&l;/span&g; &l;span class=\&q;keyword\&q;&g;primary&l;/span&g; &l;span class=\&q;keyword\&q;&g;key&l;/span&g;,  &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 列级约束&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  username &l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;255&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  email &l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;255&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;);&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;主键约束, 主键值, 主键字段&l;br&g;\n主键有什么作用？&l;/p&g;\n&l;ul&g;\n&l;li&g;表的设计三范式中有要求，第一范式就要求任何一张表都应该有主键。&l;/li&g;\n&l;li&g;主键的作用：主键值是这行记录在这张表当中的唯一标识。（就像一个人的身份证号码一样。）&l;/li&g;\n&l;/ul&g;\n&l;p&g;**  主键的分类:**&l;br&g;\n  根据&l;strong&g;主键字段的字段数量&l;/strong&g;来划分：&l;/p&g;\n&l;ol&g;\n&l;li&g;单一主键（推荐的，常用的。）&l;/li&g;\n&l;li&g;复合主键 (多个字段联合起来添加一个主键约束)（复合主键不建议使用，因为复合主键违背三范式。）&l;/li&g;\n&l;/ol&g;\n&l;p&g;根据&l;strong&g;主键性质&l;/strong&g;来划分：&l;/p&g;\n&l;ol&g;\n&l;li&g;自然主键：主键值最好就是一个和业务没有任何关系的自然数。（这种方式是推荐的）&l;/li&g;\n&l;li&g;业务主键：主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键，拿着身份证号码作为主键。（不推荐用）最好不要拿着和业务挂钩的字段作为主键。因为以后的业务一旦发生改变的时候，主键值可能也需要随着发生变化，但有的时候没有办法变化，因为变化可能会导致主键值重复。&l;/li&g;\n&l;/ol&g;\n&l;p&g;一张表的主键约束只能有 1 个。（必须记住）&l;br&g;\n&l;strong&g;mysql 提供主键值自增：（非常重要。）&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; if &l;span class=\&q;keyword\&q;&g;exists&l;/span&g; t_user;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_user(&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  \tid &l;span class=\&q;type\&q;&g;int&l;/span&g; &l;span class=\&q;keyword\&q;&g;primary&l;/span&g; &l;span class=\&q;keyword\&q;&g;key&l;/span&g; auto_increment, &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; id字段自动维护一个自增的数字，从&l;span class=\&q;number\&q;&g;1&l;/span&g;开始，以&l;span class=\&q;number\&q;&g;1&l;/span&g;递增。&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  \tusername &l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;255&l;/span&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  );&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;外键约束: 子表引用父表的某一字段&l;/strong&g;&l;br&g;\n关于外键约束的相关术语：&l;/p&g;\n&l;ul&g;\n&l;li&g;外键约束: foreign key&l;/li&g;\n&l;li&g;外键字段：添加有外键约束的字段&l;/li&g;\n&l;li&g;外键值：外键字段中的每一个值。&l;/li&g;\n&l;/ul&g;\n&l;p&g;删除先删子, 再删除父表&l;br&g;\n创建的时候先创建父表, 后创建子表&l;br&g;\n外键可以为 NULL。 &l;br&g;\n外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？&l;br&g;\n注意：被引用的字段不一定是主键，但至少具有 unique 约束。&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; if &l;span class=\&q;keyword\&q;&g;exists&l;/span&g; t_student;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; t_student(&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tstudent_id  \t&l;span class=\&q;type\&q;&g;int&l;/span&g;(&l;span class=\&q;number\&q;&g;10&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tstudent_name \t&l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;20&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tsex\t\t&l;span class=\&q;type\&q;&g;char&l;/span&g;(&l;span class=\&q;number\&q;&g;2&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tbirthday\t&l;span class=\&q;type\&q;&g;date&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\temail\t\t&l;span class=\&q;type\&q;&g;varchar&l;/span&g;(&l;span class=\&q;number\&q;&g;30&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\tclasses_id\t&l;span class=\&q;type\&q;&g;int&l;/span&g;(&l;span class=\&q;number\&q;&g;3&l;/span&g;),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;constraint&l;/span&g; student_id_pk &l;span class=\&q;keyword\&q;&g;primary&l;/span&g; &l;span class=\&q;keyword\&q;&g;key&l;/span&g;(student_id),&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 外键约束&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t&l;span class=\&q;keyword\&q;&g;constraint&l;/span&g; fk_classes_id &l;span class=\&q;keyword\&q;&g;foreign&l;/span&g; &l;span class=\&q;keyword\&q;&g;key&l;/span&g;(classes_id) &l;span class=\&q;keyword\&q;&g;references&l;/span&g; t_classes(classes_id)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h1 id=\&q;mysql-函数\&q;&g;MySQL 函数&l;a title=\&q;#mysql-函数\&q; href=\&q;#mysql-函数\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628104426-3c96f455-fd2b-4d12-8409-c39de3d0d21a.png#align=left&a;amp;display=inline&a;amp;height=422&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=844&a;amp;originWidth=1629&a;amp;size=161241&a;amp;status=done&a;amp;style=none&a;amp;width=814.5\&q; alt=\&q;image.png\&q; class=\&q;φcx\&q;&g;&l;/p&g;\n&l;h2 id=\&q;数字函数\&q;&g;数字函数&l;a title=\&q;#数字函数\&q; href=\&q;#数字函数\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628125708-62edf585-c0ac-4095-b875-a52f5c7a0f6b.png#align=left&a;amp;display=inline&a;amp;height=429&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=857&a;amp;originWidth=1582&a;amp;size=324277&a;amp;status=done&a;amp;style=none&a;amp;width=791\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628448775-653fbf09-85cd-466b-b552-244d78dc50e9.png#align=left&a;amp;display=inline&a;amp;height=378&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=755&a;amp;originWidth=1613&a;amp;size=274734&a;amp;status=done&a;amp;style=none&a;amp;width=806.5\&q; alt=\&q;image.png\&q;&g;&l;/p&g;\n&l;h2 id=\&q;日期函数\&q;&g;日期函数&l;a title=\&q;#日期函数\&q; href=\&q;#日期函数\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628801318-9fed73e7-4d83-4563-8221-5a0a345cf5e2.png#align=left&a;amp;display=inline&a;amp;height=324&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=647&a;amp;originWidth=1629&a;amp;size=184165&a;amp;status=done&a;amp;style=none&a;amp;width=814.5\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628980094-1b2de4d8-908e-4cc1-a110-f9e072e5d0a2.png#align=left&a;amp;display=inline&a;amp;height=426&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=852&a;amp;originWidth=1628&a;amp;size=217362&a;amp;status=done&a;amp;style=none&a;amp;width=814\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608629819415-b7f21424-2ba0-4042-adf3-2064624499f5.png#align=left&a;amp;display=inline&a;amp;height=373&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=745&a;amp;originWidth=1743&a;amp;size=249049&a;amp;status=done&a;amp;style=none&a;amp;width=871.5\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608629982636-1a3d491d-c249-40af-86a9-457c15b09efa.png#align=left&a;amp;display=inline&a;amp;height=292&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=584&a;amp;originWidth=1705&a;amp;size=138622&a;amp;status=done&a;amp;style=none&a;amp;width=852.5\&q; alt=\&q;image.png\&q;&g;&l;/p&g;\n&l;h2 id=\&q;字符函数\&q;&g;字符函数&l;a title=\&q;#字符函数\&q; href=\&q;#字符函数\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608630046432-3d5403e5-51f2-420f-b7a3-cf12f7f47db6.png#align=left&a;amp;display=inline&a;amp;height=334&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=668&a;amp;originWidth=1682&a;amp;size=169480&a;amp;status=done&a;amp;style=none&a;amp;width=841\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608630571966-b8b6ee75-245f-49de-b09a-945ebe612853.png#align=left&a;amp;display=inline&a;amp;height=266&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=532&a;amp;originWidth=1713&a;amp;size=146491&a;amp;status=done&a;amp;style=none&a;amp;width=856.5\&q; alt=\&q;image.png\&q;&g;&l;/p&g;\n&l;h2 id=\&q;条件函数\&q;&g;条件函数&l;a title=\&q;#条件函数\&q; href=\&q;#条件函数\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608736977092-96b9a591-d875-4b36-9eb3-07a95995c342.png#align=left&a;amp;display=inline&a;amp;height=259&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=518&a;amp;originWidth=1444&a;amp;size=73247&a;amp;status=done&a;amp;style=none&a;amp;width=722\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1608737027923-92edb941-68be-4d8f-a2a0-df11df275ac0.png#align=left&a;amp;display=inline&a;amp;height=322&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=643&a;amp;originWidth=1499&a;amp;size=173223&a;amp;status=done&a;amp;style=none&a;amp;width=749.5\&q; alt=\&q;image.png\&q;&g;&l;/p&g;\n&l;h1 id=\&q;事务-tcl\&q;&g;事务 TCL&l;a title=\&q;#事务-tcl\&q; href=\&q;#事务-tcl\&q;&g;&l;/a&g;&l;/h1&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;SET&l;/span&g; AUTOCOMMIT&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;literal\&q;&g;false&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;START&l;/span&g; TRANSACTION ;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;SELECT&l;/span&g; &l;span class=\&q;operator\&q;&g;*&l;/span&g; &l;span class=\&q;keyword\&q;&g;FROM&l;/span&g; dept;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;UPDATE&l;/span&g; dept &l;span class=\&q;keyword\&q;&g;set&l;/span&g; LOC&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;string\&q;&g;&a;#x27;BEIJIN&a;#x27;&l;/span&g; &l;span class=\&q;keyword\&q;&g;WHERE&l;/span&g; LOC&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;string\&q;&g;&a;#x27;NEW YORK&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;SELECT&l;/span&g; &l;span class=\&q;operator\&q;&g;*&l;/span&g; &l;span class=\&q;keyword\&q;&g;FROM&l;/span&g;  dept;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;ROLLBACK&l;/span&g; ;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;# &l;span class=\&q;keyword\&q;&g;COMMIT&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;SELECT&l;/span&g; &l;span class=\&q;operator\&q;&g;*&l;/span&g; &l;span class=\&q;keyword\&q;&g;FROM&l;/span&g;  dept;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;关于事务\&q;&g;关于事务&l;a title=\&q;#关于事务\&q; href=\&q;#关于事务\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;一个事务是一个完整的业务逻辑单元，不可再分。&l;br&g;\n比如：银行账户转账，从 A 账户向 B 账户转账 10000.需要执行两条 update 语句：&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;update&l;/span&g; t_act &l;span class=\&q;keyword\&q;&g;set&l;/span&g; balance &l;span class=\&q;operator\&q;&g;=&l;/span&g; balance &l;span class=\&q;operator\&q;&g;-&l;/span&g; &l;span class=\&q;number\&q;&g;10000&l;/span&g; &l;span class=\&q;keyword\&q;&g;where&l;/span&g; actno &l;span class=\&q;operator\&q;&g;=&l;/span&g; &l;span class=\&q;string\&q;&g;&a;#x27;act-001&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;update&l;/span&g; t_act &l;span class=\&q;keyword\&q;&g;set&l;/span&g; balance &l;span class=\&q;operator\&q;&g;=&l;/span&g; balance &l;span class=\&q;operator\&q;&g;+&l;/span&g; &l;span class=\&q;number\&q;&g;10000&l;/span&g; &l;span class=\&q;keyword\&q;&g;where&l;/span&g; actno &l;span class=\&q;operator\&q;&g;=&l;/span&g; &l;span class=\&q;string\&q;&g;&a;#x27;act-002&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;以上两条 DML 语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。&l;br&g;\n要想保证以上的两条 DML 语句同时成功或者同时失败，那么就需要使用数据库的**“事务机制”**。&l;br&g;\n&l;strong&g;和事务相关的语句只有：DML 语句。（insert delete update）&l;/strong&g;&l;br&g;\n为什么？因为它们这三个语句都是和数据库表当中的“数据”相关的。&l;br&g;\n事务的存在是为了保证数据的完整性，安全性。&l;/p&g;\n&l;p&g;假设所有的业务都能使用 1 条 DML 语句搞定，还需要事务机制吗？&l;br&g;\n不需要事务。&l;br&g;\n但实际情况不是这样的，通常一个“事儿（事务【业务】）”需要多条 DML 语句共同联合完成。&l;/p&g;\n&l;p&g;&l;strong&g;事务的特性？&l;/strong&g;&l;br&g;\n事务包括四大特性：ACID&l;br&g;\nA(Atomicity): 原子性：事务是最小的工作单元，不可再分。&l;br&g;\nC(Consistency): 一致性：事务必须保证多条 DML 语句同时成功或者同时失败。&l;br&g;\nI(Isolation)：隔离性：事务 A 与事务 B 之间具有隔离。&l;br&g;\nD(Durability)：持久性：持久性说的是最终数据必须持久化到硬盘文件中，事务才算成功的结束。&l;/p&g;\n&l;p&g;&l;strong&g;事务中存在一些概念：&l;/strong&g;&l;br&g;\na) 事务（Transaction）：一批操作（一组 DML）&l;br&g;\nb) 开启事务（Start Transaction）&l;br&g;\nc) 回滚事务（rollback）&l;br&g;\nd) 提交事务（commit）&l;br&g;\ne) SET AUTOCOMMIT：禁用或启用事务的自动提交模式&l;/p&g;\n&l;h2 id=\&q;并发过程中存在的问题\&q;&g;并发过程中存在的问题&l;a title=\&q;#并发过程中存在的问题\&q; href=\&q;#并发过程中存在的问题\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;1 . &l;strong&g;丢失更新问题&l;/strong&g;&l;br&g;\n2 . &l;strong&g;读&a;quot;脏&a;quot;数据问题&l;/strong&g;&l;br&g;\n3 . &l;strong&g;不可重复读&l;/strong&g;&l;/p&g;\n&l;h2 id=\&q;关于隔离级别\&q;&g;关于隔离级别&l;a title=\&q;#关于隔离级别\&q; href=\&q;#关于隔离级别\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;&l;strong&g;关于事务之间的隔离性&l;/strong&g;&l;br&g;\n  事务隔离性存在隔离级别，理论上隔离级别包括 4 个：&l;br&g;\n**   第一级别：读未提交（read uncommitted）**&l;br&g;\n允许一个事务可以看到其他事务未提交的修改。&l;br&g;\n    对方事务还没有提交，我们当前事务可以读取到对方未提交的数据。&l;br&g;\n    读未提交存在脏读（Dirty Read）现象：表示读到了脏的数据。&l;br&g;\n**   第二级别：读已提交（read committed）**&l;br&g;\n允许一个事务只能看到其他事务已经提交的修改，未提交的修改是不可见的。&l;br&g;\n    这种隔离级别解决了: 脏读现象没有了。&l;br&g;\n    读已提交存在的问题是：不可重复读。&l;br&g;\n每次对方修改, 都读取不到之前的数据, 不可重复读&l;br&g;\n**   第三级别：可重复读（repeatable read）**&l;br&g;\n确保如果在一个事务中执行两次相同的 SELECT 语句，都能得到相同的结果，不管其他事务是否提交这些修改。 （银行总账）&l;br&g;\n    这种隔离级别解决了：不可重复读问题。&l;br&g;\n事务期间, 读取的数据不变, 不管别的事务是否对硬盘数据进行操作&l;br&g;\n    这种隔离级别存在的问题是：读取到的数据是幻象。&l;br&g;\n**   第四级别：序列化读/串行化读（serializable）  **&l;br&g;\n别的事务结束了, 本事务才能操作&l;br&g;\n    解决了所有问题。&l;br&g;\n将一个事务与其他事务完全地隔离。 &l;br&g;\n    效率低。需要事务排队。&l;br&g;\noracle 数据库默认的隔离级别是：读已提交。&l;br&g;\nmysql 数据库默认的隔离级别是：可重复读。&l;/p&g;\n&l;p&g;mysql 事务默认情况下是自动提交的。&l;br&g;\n什么是自动提交？只要执行任意一条 DML 语句则提交一次。）怎么关闭自动提交？&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;mysql&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;start&l;/span&g; transaction;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;设置隔离级别\&q;&g;设置隔离级别&l;a title=\&q;#设置隔离级别\&q; href=\&q;#设置隔离级别\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;**通过修改配置文件设置  **&l;br&g;\n可以在 my.ini 文件中使用 transaction-isolation 选项来设置服务器的缺省事务隔离级别。  &l;br&g;\n该选项值可以是：  &l;br&g;\n– READ-UNCOMMITTED&l;br&g;\n– READ-COMMITTED&l;br&g;\n– REPEATABLE-READ&l;br&g;\n– SERIALIZABLE&l;br&g;\n例如：&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;[mysqld]&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;transaction&l;span class=\&q;operator\&q;&g;-&l;/span&g;isolation &l;span class=\&q;operator\&q;&g;=&l;/span&g; READ&l;span class=\&q;operator\&q;&g;-&l;/span&g;COMMITTED&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;通过命令动态设置隔离级别&l;/strong&g;&l;br&g;\n隔离级别也可以在运行的服务器中动态设置，应使用 SET TRANSACTION ISOLATION LEVEL 语句。  &l;br&g;\n其语法模式为：&l;br&g;\n&l;code&g;SET [GLOBAL | SESSION] TRANSACTION ISOLATION LEVEL &a;lt;isolation-level&a;gt;&l;/code&g; &l;br&g;\n其中的&l;isolation-level&g;可以是：&l;br&g;\n– READ UNCOMMITTED&l;br&g;\n– READ COMMITTED&l;br&g;\n– REPEATABLE READ&l;br&g;\n– SERIALIZABLE&l;br&g;\n例如：&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;SET&l;/span&g; TRANSACTION ISOLATION LEVEL REPEATABLE READ;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;查看隔离级别&l;/strong&g;&l;br&g;\n服务器变量 &l;code&g;tx_isolation&l;/code&g;  包括会话级和全局级两个变量）中保存着当前的会话隔离级别。  &l;br&g;\n为了查看当前隔离级别，可访问 &l;code&g;tx_isolation&l;/code&g;  变量：  &l;br&g;\n查看会话级的当前隔离级别：&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;mysql&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;SELECT&l;/span&g; @&l;span class=\&q;variable\&q;&g;@tx&l;/span&g;_isolation;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;mysql&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;SELECT&l;/span&g; @&l;span class=\&q;variable\&q;&g;@session&l;/span&g;.tx_isolation;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;查看全局级的当前隔离级别：&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;mysql&l;span class=\&q;operator\&q;&g;&a;gt;&l;/span&g; &l;span class=\&q;keyword\&q;&g;SELECT&l;/span&g; @&l;span class=\&q;variable\&q;&g;@global&l;/span&g;.tx_isolation;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h1 id=\&q;索引\&q;&g;索引&l;a title=\&q;#索引\&q; href=\&q;#索引\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;&l;strong&g;什么是索引？有什么用？&l;/strong&g;&l;br&g;\n索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。&l;br&g;\n在数据库方面，查询一张表的时候有两种检索方式：&l;br&g;\n  第一种方式：全表扫描&l;br&g;\n  第二种方式：根据索引检索（效率很高）&l;br&g;\n索引为什么可以提高检索效率呢？ 其实最根本的原理是缩小了扫描的范围。&l;/p&g;\n&l;p&g;索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护。是有维护成本的。比如，表中的数据经常被修改这样就不适合添加索引，&l;strong&g;因为数据一旦修改，索引需要重新排序，进行维护。&l;/strong&g;&l;br&g;\n添加索引是给某一个字段，或者说某些字段添加索引。&l;br&g;\n select ename,sal from emp where ename = ‘SMITH’;&l;br&g;\n  当 ename 字段上没有添加索引的时候，以上 sql 语句会进行全表扫描，扫描 ename 字段中所有的值。&l;br&g;\n  当 ename 字段上添加索引的时候，以上 sql 语句会根据索引扫描，快速定位。&l;/p&g;\n&l;p&g;什么时候考虑&l;strong&g;给字段添加索引&l;/strong&g;？（满足什么条件）&l;/p&g;\n&l;ol&g;\n&l;li&g;数据量庞大。（根据客户的需求，根据线上的环境）&l;/li&g;\n&l;li&g;该字段很少的 DML(插入,删除)操作。（因为字段进行修改操作，索引也需要维护）&l;/li&g;\n&l;li&g;该字段经常出现在 where 子句中。（经常根据哪个字段查询）&l;/li&g;\n&l;li&g;该字段经常出现在连接操作的连接条件中.&l;/li&g;\n&l;/ol&g;\n&l;p&g;注意：主键和具有 unique 约束的字段自动会添加索引。根据主键查询效率较高。尽量根据主键检索。&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;给薪资sal字段添加索引：&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; index emp_sal_index &l;span class=\&q;keyword\&q;&g;on&l;/span&g; emp(sal);&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;索引底层采用的数据结构是：B + Tree&l;/strong&g;&l;br&g;\n&l;strong&g;索引的分类&l;/strong&g;&l;/p&g;\n&l;ol&g;\n&l;li&g;单一索引：给单个字段添加索引&l;/li&g;\n&l;li&g;复合索引: 给多个字段联合起来添加 1 个索引&l;/li&g;\n&l;li&g;主键索引：主键上会自动添加索引&l;/li&g;\n&l;li&g;唯一索引：有 unique 约束的字段上会自动添加索引&l;/li&g;\n&l;/ol&g;\n&l;p&g;&l;strong&g;索引的实现原理？&l;/strong&g;&l;br&g;\n通过 B Tree 缩小扫描范围，底层索引进行了排序，分区，索引会携带数据在表中的“物理地址”，最终通过索引检索到数据之后，获取到关联的物理地址，通过物理地址定位表中的数据，效率是最高的。&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; ename &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;where&l;/span&g; ename &l;span class=\&q;operator\&q;&g;=&l;/span&g; &l;span class=\&q;string\&q;&g;&a;#x27;SMITH&a;#x27;&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;通过索引转换为：&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;select&l;/span&g; ename &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp &l;span class=\&q;keyword\&q;&g;where&l;/span&g; 物理地址 &l;span class=\&q;operator\&q;&g;=&l;/span&g; &l;span class=\&q;number\&q;&g;0x3&l;/span&g;;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;索引什么时候失效？&l;br&g;\n&l;code&g;select ename from emp where ename like &s;%A%&s;;&l;/code&g; &l;br&g;\n模糊查询的时候，第一个通配符使用的是%，这个时候索引是失效的。&l;/p&g;\n&l;h1 id=\&q;视图\&q;&g;视图&l;a title=\&q;#视图\&q; href=\&q;#视图\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;&l;strong&g;什么是视图？&l;/strong&g;&l;br&g;\n站在不同的角度去看到数据。（同一张表的数据，通过不同的角度去看待）。&l;/p&g;\n&l;p&g;&l;strong&g;怎么创建视图？怎么删除视图？&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;view&l;/span&g; myview &l;span class=\&q;keyword\&q;&g;as&l;/span&g; &l;span class=\&q;keyword\&q;&g;select&l;/span&g; empno,ename &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;drop&l;/span&g; &l;span class=\&q;keyword\&q;&g;view&l;/span&g; myview;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;注意：只有 DQL 语句才能以视图对象的方式创建出来。&l;br&g;\n对视图进行增删改查，会影响到原表数据。（通过视图影响原表数据的，不是直接操作的原表）&l;br&g;\n可以对视图进行 CRUD 操作。&l;/p&g;\n&l;figure class=\&q;highlight sql\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;table&l;/span&g; emp_bak &l;span class=\&q;keyword\&q;&g;as&l;/span&g; &l;span class=\&q;keyword\&q;&g;select&l;/span&g; &l;span class=\&q;operator\&q;&g;*&l;/span&g; &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;create&l;/span&g; &l;span class=\&q;keyword\&q;&g;view&l;/span&g; myview1 &l;span class=\&q;keyword\&q;&g;as&l;/span&g; &l;span class=\&q;keyword\&q;&g;select&l;/span&g; empno,ename,sal &l;span class=\&q;keyword\&q;&g;from&l;/span&g; emp_bak;&l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 创建视图&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;update&l;/span&g; myview1 &l;span class=\&q;keyword\&q;&g;set&l;/span&g; ename&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;string\&q;&g;&a;#x27;hehe&a;#x27;&l;/span&g;,sal&l;span class=\&q;operator\&q;&g;=&l;/span&g;&l;span class=\&q;number\&q;&g;1&l;/span&g; &l;span class=\&q;keyword\&q;&g;where&l;/span&g; empno &l;span class=\&q;operator\&q;&g;=&l;/span&g; &l;span class=\&q;number\&q;&g;7369&l;/span&g;; &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 通过视图修改原表数据。&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;delete&l;/span&g; &l;span class=\&q;keyword\&q;&g;from&l;/span&g; myview1 &l;span class=\&q;keyword\&q;&g;where&l;/span&g; empno &l;span class=\&q;operator\&q;&g;=&l;/span&g; &l;span class=\&q;number\&q;&g;7369&l;/span&g;; &l;span class=\&q;operator\&q;&g;/&l;/span&g;&l;span class=\&q;operator\&q;&g;/&l;/span&g; 通过视图删除原表数据。&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;视图的作用&l;/strong&g;&l;br&g;\n视图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供相关的视图，java 程序员只对视图对象进行 CRUD。&l;br&g;\n通过多表连接产生的视图, 每次修改只能修改来自其中一张表的数据.&l;/p&g;\n&l;h1 id=\&q;数据库设计三范式\&q;&g;数据库设计三范式&l;a title=\&q;#数据库设计三范式\&q; href=\&q;#数据库设计三范式\&q;&g;&l;/a&g;&l;/h1&g;\n&l;blockquote&g;\n&l;p&g;&l;a href=\&q;https://segmentfault.com/a/1190000013695030\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;https://segmentfault.com/a/1190000013695030&l;/a&g; &a;gt; &l;a href=\&q;https://blog.csdn.net/wuyanxiaxia/article/details/22933021\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;https://blog.csdn.net/wuyanxiaxia/article/details/22933021&l;/a&g;&l;/p&g;\n&l;/blockquote&g;\n&l;h2 id=\&q;第一范式:-原子性\&q;&g;第一范式: 原子性&l;a title=\&q;#第一范式:-原子性\&q; href=\&q;#第一范式:-原子性\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;每个字段都必须是原子的, 不可再分. 一个字段只存储一项信息&l;br&g;\n在某个业务需求中: 字段 &l;strong&g;年月日&l;/strong&g; 假如可以被分成 &l;strong&g;年,月,日&l;/strong&g; ,就必须将改字段分为 3 个字段&l;/p&g;\n&l;h2 id=\&q;第二范式:-唯一性\&q;&g;第二范式: 唯一性&l;a title=\&q;#第二范式:-唯一性\&q; href=\&q;#第二范式:-唯一性\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;每一行都必须满足唯一性,   不同属性完全依赖于同一个主键. 任意一个字段都只依赖表中的同一个字段. 假如依赖于两个字段就需要将该表拆分为两个表.&l;br&g;\neg:比如不符合第二范式&l;/p&g;\n&l;div class=\&q;φcy\&q;&g;&l;div class=\&q;φda\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;text-align:left\&q;&g;学生证 名称&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;学生证号&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;学生证办理时间&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;借书证名称&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;借书证号&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;借书证办理时间&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;p&g;改成 2 张表如下&l;br&g;\n学生证表&l;/p&g;\n&l;div class=\&q;φcy\&q;&g;&l;div class=\&q;φda\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;text-align:left\&q;&g;学生证&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;学生证号&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;学生证办理时间&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;p&g;借书证表&l;/p&g;\n&l;div class=\&q;φcy\&q;&g;&l;div class=\&q;φda\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;text-align:left\&q;&g;借书证&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;借书证号&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;借书证把你拉时间&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;h2 id=\&q;第三范式:-冗余性\&q;&g;第三范式: 冗余性&l;a title=\&q;#第三范式:-冗余性\&q; href=\&q;#第三范式:-冗余性\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;要求任何字段不能由其他字段派生出来，它要求字段没有冗余，即不存在传递依赖&l;br&g;\neg:爸爸资料表，不满足第三范式&l;/p&g;\n&l;div class=\&q;φcy\&q;&g;&l;div class=\&q;φda\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;text-align:left\&q;&g;爸爸&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;儿子&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;女儿&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;女儿的小熊&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;女儿的海绵宝宝&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;p&g;改成&l;br&g;\n爸爸信息表：&l;/p&g;\n&l;div class=\&q;φcy\&q;&g;&l;div class=\&q;φda\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;text-align:left\&q;&g;爸爸&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;儿子&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;女儿&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;p&g;女儿信息表&l;/p&g;\n&l;div class=\&q;φcy\&q;&g;&l;div class=\&q;φda\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;text-align:left\&q;&g;女儿&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;女儿的小熊&l;/th&g;\n&l;th style=\&q;text-align:left\&q;&g;女儿的海绵宝宝&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;p&g;&l;strong&g;一对一设计，有两种设计方案:&l;/strong&g;&l;br&g;\n&l;strong&g;第一种设计方案：主键共享&l;/strong&g;&l;br&g;\n&l;strong&g;第二种设计方案：外键唯一&l;/strong&g;&l;/p&g;\n&l;div&g;&l;h1 id=\&q;推荐文章\&q;&g;推荐文章&l;a title=\&q;#推荐文章\&q; href=\&q;%e6%8e%a8%e8%8d%90%e6%96%87%e7%ab%a0\&q;&g;&l;/a&g;&l;/h1&g;&l;ul&g;&l;li&g;&l;a href=\&q;https://mvbbb.github.io/ce37t7/\&q;&g;LeetCode 数据库&l;/a&g;&l;/li&g;&l;li&g;&l;a href=\&q;https://vel.life/P2P%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/\&q;&g;P2P系统后端设计&l;/a&g;&l;/li&g;&l;/ul&g;&l;/div&g;&q;,&q;prev&q;:{&q;title&q;:&q;LeetCode 数据库&q;,&q;link&q;:&q;ce37t7&q;},&q;next&q;:{&q;title&q;:&q;换了一个评论系统&q;,&q;link&q;:&q;yn4ex1&q;},&q;plink&q;:&q;https://mvbbb.github.io/zwggs9/&q;,&q;toc&q;:[{&q;id&q;:&q;mysql-命令&q;,&q;title&q;:&q;MySQL 命令&q;,&q;index&q;:&q;1&q;},{&q;id&q;:&q;基本-select&q;,&q;title&q;:&q;基本 SELECT&q;,&q;index&q;:&q;2&q;},{&q;id&q;:&q;排序-order-by&q;,&q;title&q;:&q;排序 ORDER BY&q;,&q;index&q;:&q;3&q;},{&q;id&q;:&q;分组/聚合函数&q;,&q;title&q;:&q;分组&a;#x2F;聚合函数&q;,&q;index&q;:&q;4&q;},{&q;id&q;:&q;分组查询&q;,&q;title&q;:&q;分组查询&q;,&q;index&q;:&q;5&q;},{&q;id&q;:&q;连接查询-join&q;,&q;title&q;:&q;连接查询 JOIN&q;,&q;index&q;:&q;6&q;},{&q;id&q;:&q;union-并集&q;,&q;title&q;:&q;UNION 并集&q;,&q;index&q;:&q;7&q;},{&q;id&q;:&q;limit-的使用&q;,&q;title&q;:&q;LIMIT 的使用&q;,&q;index&q;:&q;8&q;},{&q;id&q;:&q;表&q;,&q;title&q;:&q;表&q;,&q;index&q;:&q;9&q;,&q;children&q;:[{&q;id&q;:&q;创建表&q;,&q;title&q;:&q;创建表&q;,&q;index&q;:&q;9.1&q;},{&q;id&q;:&q;增/删/改-ddl&q;,&q;title&q;:&q;增&a;#x2F;删&a;#x2F;改 DDL&q;,&q;index&q;:&q;9.2&q;},{&q;id&q;:&q;增/删/改-dml&q;,&q;title&q;:&q;增&a;#x2F;删&a;#x2F;改 DML&q;,&q;index&q;:&q;9.3&q;},{&q;id&q;:&q;创建表加入约束&q;,&q;title&q;:&q;创建表加入约束&q;,&q;index&q;:&q;9.4&q;}]},{&q;id&q;:&q;mysql-函数&q;,&q;title&q;:&q;MySQL 函数&q;,&q;index&q;:&q;10&q;,&q;children&q;:[{&q;id&q;:&q;数字函数&q;,&q;title&q;:&q;数字函数&q;,&q;index&q;:&q;10.1&q;},{&q;id&q;:&q;日期函数&q;,&q;title&q;:&q;日期函数&q;,&q;index&q;:&q;10.2&q;},{&q;id&q;:&q;字符函数&q;,&q;title&q;:&q;字符函数&q;,&q;index&q;:&q;10.3&q;},{&q;id&q;:&q;条件函数&q;,&q;title&q;:&q;条件函数&q;,&q;index&q;:&q;10.4&q;}]},{&q;id&q;:&q;事务-tcl&q;,&q;title&q;:&q;事务 TCL&q;,&q;index&q;:&q;11&q;,&q;children&q;:[{&q;id&q;:&q;关于事务&q;,&q;title&q;:&q;关于事务&q;,&q;index&q;:&q;11.1&q;},{&q;id&q;:&q;并发过程中存在的问题&q;,&q;title&q;:&q;并发过程中存在的问题&q;,&q;index&q;:&q;11.2&q;},{&q;id&q;:&q;关于隔离级别&q;,&q;title&q;:&q;关于隔离级别&q;,&q;index&q;:&q;11.3&q;},{&q;id&q;:&q;设置隔离级别&q;,&q;title&q;:&q;设置隔离级别&q;,&q;index&q;:&q;11.4&q;}]},{&q;id&q;:&q;索引&q;,&q;title&q;:&q;索引&q;,&q;index&q;:&q;12&q;},{&q;id&q;:&q;视图&q;,&q;title&q;:&q;视图&q;,&q;index&q;:&q;13&q;},{&q;id&q;:&q;数据库设计三范式&q;,&q;title&q;:&q;数据库设计三范式&q;,&q;index&q;:&q;14&q;,&q;children&q;:[{&q;id&q;:&q;第一范式:-原子性&q;,&q;title&q;:&q;第一范式: 原子性&q;,&q;index&q;:&q;14.1&q;},{&q;id&q;:&q;第二范式:-唯一性&q;,&q;title&q;:&q;第二范式: 唯一性&q;,&q;index&q;:&q;14.2&q;},{&q;id&q;:&q;第三范式:-冗余性&q;,&q;title&q;:&q;第三范式: 冗余性&q;,&q;index&q;:&q;14.3&q;}]},{&q;id&q;:&q;推荐文章&q;,&q;title&q;:&q;推荐文章&q;,&q;index&q;:&q;15&q;}],&q;copyright&q;:{&q;author&q;:&q;Mvbbb&q;,&q;link&q;:&q;&l;a href=\&q;https://mvbbb.github.io/zwggs9/\&q; title=\&q;MySQL 基础\&q;&g;https://mvbbb.github.io/zwggs9/&l;/a&g;&q;,&q;license&q;:&q;Attribution-NonCommercial-NoDerivatives 4.0 International (&l;a href=\&q;https://creativecommons.org/licenses/by-nc-sa/4.0/\&q; rel=\&q;external nofollow noopener\&q; target=\&q;_blank\&q;&g;CC BY-NC-ND 4.0&l;/a&g;)&q;}}}</script></head><body lang="en"><div style="display:none"><script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279526637&amp;web_id=1279526637"></script></div>
<!-- hexo injector head_end start --><link href="//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat" rel="stylesheet"><link href="/styles.43478ea7e28ed563c48b.css" rel="stylesheet">
<script src="/config.f667b9e14173c512056d.js"></script>

<link rel="stylesheet" href="/theme.6191587147d30da44d8f.css" is="theme">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0">
<!-- hexo injector body_begin start --><is-a class="φbm φk" ng-version="10.0.11"><is-l class="φeb φh"><div class="φel"><section class="φem"><header class="φec φf"><!----><is-c class="φed"><img draggable="false" class="φbw φw" src="images/avatar.jpg" alt="" title="" width="160" height="160"></is-c><!----><a href="" class="φef φa φu">Mvbbb</a><p class="φee">Who i am,who u are</p></header><div class="φeq φf"><a routerlink="/archives" class="φer φu" href="/archives"><span class="φd">45</span><span>Archives</span></a><a class="φer φu" href="/categories/Java"><span class="φd">14</span><span>Categories</span></a><!----><a routerlink="/tags" class="φer φu" href="/tags"><span class="φd">34</span><span>Tags</span></a><!----></div><!----><nav class="φen"><a class="φeo φbd φj φc φu φo" href="/">Home</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/about">About</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/search">Search</a><!----><!----><!----><!----><a target="_blank" rel="external nofollow noopener" class="φeo φbd φj φc φu φo" href="https://www.yuque.com/u1296515/zb4bwb">Yuque</a><!----><!----><!----></nav><!----><!----></section><footer class="φeg φeh"><div class="φej"><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-email" href="mailto:3212618781@qq.com">email</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-feed" href="https://mvbbb.github.io/rss2.xml">feed</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-github" href="https://github.com/Mvbbb">github</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-myspace" href="/links">myspace</a><!----></div><!----><p class="φbk φz">© 2019-2021 ❤ <a href="https://github.com/Mvbbb">Mvbbb</a></p><!----><!----><!----></footer></div></is-l><div class="φbo"><div class="φbn"><div class="φbs φbe"><main class="φbr φbf"><router-outlet></router-outlet><is-s class="φfx φf"><header class="φgh φgi" style="background-image:;background-color:;"><div class="φgq"><h1 class="φgt">MySQL 基础</h1><!----><p class="φgj φr"><span class="φgk φgo">Sep 19, 2020</span><a class="φgk φgm φu" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a><!----><!----><!----></p><!----><!----></div></header><article itemscope="" itemtype="http://schema.org/Article" class="φga" data-title="MySQL 基础"><div itemprop="articleBody" issnippet="" iszoomable="" class="φbk φh φz"><p><a href="https://sqlzoo.net/" target="_blank" rel="external nofollow noopener">练习网站</a> <a href="https://blog.csdn.net/qq_38490457/article/details/107640904" target="_blank" rel="external nofollow noopener">学习 MySQL 这一篇就够了</a><br>
<a href="https://www.runoob.com/sql/sql-tutorial.html" target="_blank" rel="external nofollow noopener">SQL 教程</a> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="external nofollow noopener">MySQL 教程</a></p>
<a id="more"></a>
<h1 id="mysql-命令">MySQL 命令<a title="#mysql-命令" href="#mysql-命令"></a></h1>
<p>表中具有几个概念：列、行、主键。 列叫做字段(Column),行叫做表中的记录,每一个字段都有:字段名称/字段数据类型/字段约束/字段长度</p>
<p><strong>那么 SQL 语句包括增删改查，SQL 语句怎么分类呢？</strong></p>
<ol>
<li>DQL（数据查询语言 Data Query Language）: 查询语句，凡是 select 语句都是 DQL。</li>
<li>DML（数据操作语言 Data Manipulation Language）：insert delete update，对表当中的数据进行增删改。</li>
<li>DDL（数据定义语言 Data Definition Language）：create drop alter，对表结构的增删改。</li>
<li>TCL（事务控制语言 Transactional Control Language）：commit 提交事务，rollback 回滚事务。(TCL 中的 T 是 Transaction)</li>
<li>DCL（数据控制语言 Data Control Language）: grant 授权、revoke 撤销权限等。</li>
</ol>
<p><strong>常见 SQL 命令</strong><br>
show datebases;<br>
create database <dbname>;<br>
use <dbname>;<br>
show tables;<br>
删除数据库：drop database&nbsp;<dbname>;<br>
查看表结构:&nbsp;desc&nbsp;<tablename>;<br>
查看表内容: &nbsp;select * from <tablename>;<br>
查看 MySQL 版本: select version();<br>
查看当前数据库名称: select database();<br>
退出: exit;<br>
查看别的数据库的表: show tables from <database>;<br>
查看创建表的语句：show create table <tablename>;</tablename></database></tablename></tablename></dbname></dbname></dbname></p>
<p><strong>什么是 sql 脚本呢？</strong><br>
当一个文件的扩展名是.sql，并且该文件中编写了大量的 sql 语句，我们称这样的文件为 sql 脚本。<br>
注意：直接使用 source 命令可以执行 sql 脚本。<br>
sql 脚本中的数据量太大的时候，无法打开，请使用 source 命令完成初始化。</p>
<h1 id="基本-select">基本 SELECT<a title="#基本-select" href="#基本-select"></a></h1>
<p><strong>简单的查询语句:</strong><br>
语法格式： &nbsp;select 字段名 1,字段名 2,字段名 3,… from 表名;</p>
<blockquote>
<p>sql 语句不区分大小写。</p>
</blockquote>
<p>查询员工的年薪？（字段可以参与数学运算。）<br>
<code>select ename,sal * 12 from emp;</code>&nbsp;<br>
&nbsp; 给查询结果的列重命名？<br>
<code>select ename,sal * 12 as yearsal from emp;</code>&nbsp;<br>
&nbsp; 别名中有中文？<br>
<code>select ename,sal * 12 as 年薪 from emp; // 错误</code>&nbsp;<br>
<code>select ename,sal * 12 as '年薪' from emp;</code>&nbsp;<br>
注意：标准 sql 语句中要求字符串使用单引号括起来。虽然 mysql 支持双引号，尽量别用。<br>
as 关键字可以省略？<br>
<code>mysql&gt; select empno,ename,sal * 12 yearsal from emp;</code></p>
<p>条件查询需要用到 where 语句，where 必须放到 from 语句表的后面<br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1600517549715-eab7ed18-fa4e-4dae-b58e-744ec8dc8b93.png#align=left&amp;display=inline&amp;height=258&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=516&amp;originWidth=1081&amp;size=51351&amp;status=done&amp;style=none&amp;width=540.5" alt="image.png"></p>
<p>在数据库当中 NULL 不是一个值，代表什么也没有，为空。<br>
空不是一个值，不能用等号衡量。<br>
<strong>必须使用 is null 或者 is not null</strong></p>
<p>and 和 or 联合起来用：找出薪资大于 1000 的并且部门编号是 20 或 30 部门的员工。<br>
<code>select ename,sal,deptno from emp where sal &gt; 1000 and deptno = 20 or deptno = 30; // 错误的</code>&nbsp;<br>
<code>select ename,sal,deptno from emp where sal &gt; 1000 and (deptno = 20 or deptno = 30); // 正确的。</code>&nbsp;<br>
** &nbsp; 注意：当运算符的优先级不确定的时候加小括号。**<br>
in 等同于 or：<br>
<code>select ename,job from emp where job in('SALESMAN', 'MANAGER');</code></p>
<p>*<em>模糊查询 like **<br>
找出名字当中含有 O 的？<br>
&nbsp; &nbsp;（在模糊查询当中，必须掌握两个特殊的符号，一个是%，一个是</em>）<br>
&nbsp; &nbsp;%代表任意多个字符，*代表任意 1 个字符。<br>
&nbsp; &nbsp;<code>select ename from emp where ename like '%O%';</code>&nbsp;<br>
找出名字中第二个字母是 A 的？<br>
<code>select ename from emp where ename like '_A%';</code>&nbsp;<br>
找出名字中最后一个字母是 T 的？<br>
<code>select ename from emp where ename like '%T';</code>&nbsp;<br>
查询结果去重 <code>distinct</code>&nbsp; distinct 只能出现在所有字段的最前面。<br>
<code>select distinct job from emp;</code></p>
<h1 id="排序-order-by">排序 ORDER BY<a title="#排序-order-by" href="#排序-order-by"></a></h1>
<p>默认是升序. asc 表示升序，desc 表示降序。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename , sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal; <span class="operator">/</span><span class="operator">/</span> 升序</span><br><span class="line"><span class="keyword">select</span> ename , sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">asc</span>; <span class="operator">/</span><span class="operator">/</span> 升序</span><br><span class="line"><span class="keyword">select</span> ename , sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>; <span class="operator">/</span><span class="operator">/</span> 降序。</span><br></pre></td></tr></tbody></table></figure>
<p>按照工资的降序排列，当工资相同的时候再按照名字的升序排列。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> , ename <span class="keyword">asc</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>注意：越靠前的字段越能起到主导作用。只有当前面的字段无法完成排序的时候，才会启用后面的字段。<br>
order by 是最后执行的</p>
<h1 id="分组/聚合函数">分组/聚合函数<a title="#分组/聚合函数" href="#分组/聚合函数"></a></h1>
<p><strong>count 计数, sum 求和, avg 平均值, max 最大值, min 最小值</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> JOB<span class="operator">=</span><span class="string">'CLERK'</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong>所有的分组函数都是对“某一组”数据进行操作的。</strong><br>
找出工资总和？<br>
&nbsp;select sum(sal) from emp;<br>
找出最高工资？<br>
&nbsp;select max(sal) from emp;<br>
找出最低工资？<br>
&nbsp;select min(sal) from emp;<br>
找出平均工资？<br>
&nbsp;select avg(sal) from emp;<br>
找出总人数？<br>
&nbsp;select count(*) from emp;<br>
&nbsp;select count(ename) from emp;<br>
分组函数一共 5 个。<br>
分组函数还有另一个名字：多行处理函数。<br>
多行处理函数的特点：输入多行，最终输出的结果是 1 行。<br>
分组函数自动忽略 NULL。</p>
<p>所有数据库都是这样规定的，<strong>只要有 NULL 参与的运算结果一定是 NULL。</strong><br>
使用 ifnull 函数：ifnull(可能为 NULL 的数据,被当做什么处理) ： 属于单行处理函数。<br>
<code>select ename,(sal+ifnull(comm,0))*12 as yearsal from emp;</code>&nbsp;<br>
sum 函数自动忽略 null</p>
<p><strong>分组函数也能组合起来用：</strong><br>
<code>select count(*),sum(sal),avg(sal),max(sal),min(sal) from emp;</code></p>
<p><strong>count(*)和 count(具体的某个字段)，他们有什么区别？</strong><br>
count(*):不是统计某个字段中数据的个数，而是统计总记录条数。（和某个字段无关）<br>
count(comm): 表示统计 comm 字段中不为 NULL 的数据总数量。</p>
<p><strong>group by ： 按照某个字段或者某些字段进行分组。</strong><br>
<strong>having : having 是对分组之后的数据进行再次过滤。</strong><br>
注意：分组函数一般都会和 group by 联合使用，这也是为什么它被称为分组函数的原因。<br>
<strong>并且任何一个分组函数（count sum avg max min）都是在 group by 语句执行结束之后才会执行的。</strong><br>
当一条 sql 语句没有 group by 的话，整张表的数据会自成一组。<br>
为什么 where 里面不能用分组函数 <code>where avl(sal)&gt; 10;</code>&nbsp;?<br>
因为只有等 where 执行之后~~ group by 才能执行~~, 之后才会去分组函数, 在组内运算.</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>		<span class="number">5</span></span><br><span class="line">		..</span><br><span class="line">	<span class="keyword">from</span>			<span class="number">1</span></span><br><span class="line">		..</span><br><span class="line">	<span class="keyword">where</span>			<span class="number">2</span></span><br><span class="line">		..</span><br><span class="line">	<span class="keyword">group</span> <span class="keyword">by</span>		<span class="number">3</span></span><br><span class="line">		..</span><br><span class="line">	<span class="keyword">having</span>		<span class="number">4</span></span><br><span class="line">		..</span><br><span class="line">	<span class="keyword">order</span> <span class="keyword">by</span>		<span class="number">6</span></span><br><span class="line">		..</span><br></pre></td></tr></tbody></table></figure>
<p><strong>记住一个规则：当一条语句中有 group by 的话，select 后面只能跟分组函数和参与分组的字段。</strong></p>
<h1 id="分组查询">分组查询<a title="#分组查询" href="#分组查询"></a></h1>
<p>分组查询主要涉及到两个子句，分别是：group by 和 having<br>
一个完整的 select 语句格式如下</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段</span><br><span class="line"><span class="keyword">from</span> 表名</span><br><span class="line"><span class="keyword">where</span> …….</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ……..</span><br><span class="line"><span class="keyword">having</span> …….(就是为了过滤分组后的数据而存在的—不可以单独的出现)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> ……..</span><br></pre></td></tr></tbody></table></figure>
<p>以上语句的执行顺序</p>
<ol>
<li>首先执行 where 语句过滤原始数据</li>
<li>执行 group by 进行分组</li>
<li>执行 having 对分组数据进行操作</li>
<li>执行 select 选出数据</li>
<li>执行 order by 排序<br>
原则：能在 where 中过滤的数据，尽量在 where 中过滤，效率较高。having 的过滤是专门对分组之后的数据进行过滤的。</li>
</ol>
<h1 id="连接查询-join">连接查询 JOIN<a title="#连接查询-join" href="#连接查询-join"></a></h1>
<p>在表的连接查询方面有一种现象被称为：笛卡尔积现象。<br>
笛卡尔积现象：当两张表进行连接查询的时候，没有任何条件进行限制，最终的查询结果条数是两张表记录条数的乘积。</p>
<p>关于表的别名：<br>
<code>select e.ename,d.dname from emp e,dept d;</code>&nbsp;<br>
表的别名有什么好处？<br>
&nbsp; 第一：执行效率高。<br>
&nbsp; 第二：可读性好。<br>
<strong>内连接中的等值连接</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">	dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></tbody></table></figure>
<p><strong>内连接的非等值连接</strong><br>
工资-&gt;工资等级</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> e.ename , e.sal,s.grade</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span> emp e</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">join</span> salgrade s</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">on</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></tbody></table></figure>
<p><strong>自连接: 一张表看出两张不同的表</strong><br>
<strong>什么是外连接，和内连接有什么区别？</strong><br>
内连接：<br>
&nbsp; 假设 A 和 B 表进行连接，使用内连接的话，凡是 A 表和 B 表能够匹配上的记录查询出来，这就是内连接。<br>
&nbsp;AB 两张表没有主副之分，两张表是平等的。<br>
外连接：<br>
&nbsp; 假设 A 和 B 表进行连接，使用外连接的话，AB 两张表中有一张表是主表，一张表是副表，主要查询主表中<br>
&nbsp; 的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，副表自动模拟出 NULL 与之匹配。</p>
<p>外连接的分类？<br>
&nbsp; 左外连接（左连接）：表示左边的这张表是主表。<br>
&nbsp; 右外连接（右连接）：表示右边的这张表是主表。<br>
&nbsp; 左连接有右连接的写法，右连接也会有对应的左连接的写法。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">外连接：（右外连接<span class="operator">/</span>右连接）</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">	a.ename <span class="string">'员工'</span>, b.ename <span class="string">'领导'</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp b</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span></span><br><span class="line">	emp a</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	a.mgr <span class="operator">=</span> b.empno;</span><br></pre></td></tr></tbody></table></figure>
<h1 id="union-并集">UNION 并集<a title="#union-并集" href="#union-并集"></a></h1>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job<span class="operator">=</span><span class="string">'MANAGER'</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job<span class="operator">=</span><span class="string">'SALESMAN'</span></span><br></pre></td></tr></tbody></table></figure>
<p>合并结果集的时候，需要查询字段对应个数相同。在 Oracle 中更严格，不但要求个数相同，而且还要求类型对应相同。</p>
<h1 id="limit-的使用">LIMIT 的使用<a title="#limit-的使用" href="#limit-的使用"></a></h1>
<p><code>select * from table limit m,n</code>&nbsp;<br>
其中 m 是指记录开始的 index，从 0 开始，表示第一条记录<br>
n 是指从第 m+1 条开始，取 n 条。<br>
<code>select * from tablename limit 2,4</code>&nbsp;<br>
即取出第 3 条至第 6 条，4 条记录</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">limit是<span class="keyword">sql</span>语句最后执行的一个环节：</span><br><span class="line">	<span class="keyword">select</span>		<span class="number">5</span></span><br><span class="line">		...</span><br><span class="line">	<span class="keyword">from</span>			<span class="number">1</span></span><br><span class="line">		...</span><br><span class="line">	<span class="keyword">where</span>			<span class="number">2</span></span><br><span class="line">		...</span><br><span class="line">	<span class="keyword">group</span> <span class="keyword">by</span>		<span class="number">3</span></span><br><span class="line">		...</span><br><span class="line">	<span class="keyword">having</span>		<span class="number">4</span></span><br><span class="line">		...</span><br><span class="line">	<span class="keyword">order</span> <span class="keyword">by</span>		<span class="number">6</span></span><br><span class="line">		...</span><br><span class="line">	limit			<span class="number">7</span></span><br><span class="line">		...;</span><br></pre></td></tr></tbody></table></figure>
<p>分页的 sql 语句 <code>limit (PageNo-1)*PageSize, PageSize;</code></p>
<h1 id="表">表<a title="#表" href="#表"></a></h1>
<h2 id="创建表">创建表<a title="#创建表" href="#创建表"></a></h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tableName(</span><br><span class="line">   columnName dataType(length),</span><br><span class="line">   ………………..</span><br><span class="line">   columnName dataType(length)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">set</span> character_set_results<span class="operator">=</span><span class="string">'gbk'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">'%char%'</span>;</span><br><span class="line"></span><br><span class="line">创建表的时候，表中有字段，每一个字段有：</span><br><span class="line">     <span class="operator">*</span> 字段名</span><br><span class="line">     <span class="operator">*</span> 字段数据类型</span><br><span class="line">     <span class="operator">*</span> 字段长度限制</span><br><span class="line">     <span class="operator">*</span> 字段约束</span><br></pre></td></tr></tbody></table></figure>
<p><strong>常用数据类型</strong><br>
&nbsp;int &nbsp; 整数型 (java 中的 int)<br>
&nbsp;bigint 长整型 (java 中的 long)<br>
&nbsp;float &nbsp; 浮点型 (java 中的 float double)<br>
&nbsp;char &nbsp; 定长字符串 (String)<br>
&nbsp;varchar 可变长字符串 (StringBuffer/StringBuilder)<br>
&nbsp;date &nbsp; 日期类型 （对应 Java 中的 java.sql.Date 类型）<br>
&nbsp;BLOB &nbsp; 二进制大对象（存储图片、视频等流媒体信息） Binary Large OBject （对应 java 中的 Object）<br>
&nbsp;CLOB &nbsp; 字符大对象（存储较大文本，比如，可以存储 4G 的字符串。）<br>
Character Large OBject（对应 java 中的 Object）</p>
<h2 id="增/删/改-ddl">增/删/改 DDL<a title="#增/删/改-ddl" href="#增/删/改-ddl"></a></h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>删除表</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>添加字段</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_student <span class="keyword">add</span>  contact_tel <span class="type">varchar</span>(<span class="number">40</span>);</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>修改字段</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_student modify student_name <span class="type">varchar</span>(<span class="number">100</span>) ;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_student change sex gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>删除字段</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_student <span class="keyword">drop</span> contact_tel;</span><br></pre></td></tr></tbody></table></figure>
<h2 id="增/删/改-dml">增/删/改 DML<a title="#增/删/改-dml" href="#增/删/改-dml"></a></h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>添加记录</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(student_id, student_name, sex, birthday, email, classes_id) <span class="keyword">values</span>(<span class="number">1001</span>, <span class="string">'zhangsan'</span>, <span class="string">'m'</span>, <span class="string">'1988-01-01'</span>, <span class="string">'qqq@163.com'</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">9999</span>,<span class="string">'zhangsan'</span>,<span class="string">'MANAGER'</span>, <span class="keyword">null</span>, <span class="keyword">null</span>,<span class="number">3000</span>, <span class="number">500</span>, <span class="number">10</span>);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>如何插入日期：</strong><br>
第一种方法，插入的日期格式和显示的日期格式一致<br>
第二种方法，采用 str_to_date<br>
第三种方法，添加系统日期（now()）</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(empno, ename, job, mgr, hiredate, sal, comm, deptno) <span class="keyword">values</span>(<span class="number">9997</span>,<span class="string">'zhangsan'</span>,<span class="string">'MANAGER'</span>, <span class="keyword">null</span>, <span class="string">'1981-06-12'</span>,<span class="number">3000</span>, <span class="number">500</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(empno, ename, job, mgr, hiredate, sal, comm, deptno) <span class="keyword">values</span>(<span class="number">9996</span>,<span class="string">'zhangsan'</span>,<span class="string">'MANAGER'</span>,<span class="keyword">null</span>,str_to_date(<span class="string">'1981-06-12'</span>,<span class="string">'%Y-%m-%d'</span>),<span class="number">3000</span>, <span class="number">500</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(empno, ename, job, mgr, hiredate, sal, comm, deptno) <span class="keyword">values</span>(<span class="number">9995</span>,<span class="string">'zhangsan'</span>,<span class="string">'MANAGER'</span>,<span class="keyword">null</span>,now() ,<span class="number">3000</span>, <span class="number">500</span>, <span class="number">10</span>);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>表复制</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_bak <span class="keyword">as</span> <span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp;</span><br></pre></td></tr></tbody></table></figure>
<p>以上方式，会自动创建表，将符合查询条件的数据自动复制到创建的表中<br>
如何将查询的数据直接放到已经存在的表中，可以使用条件</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp_bak <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal<span class="operator">=</span><span class="number">3000</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong>数据更新</strong><br>
可以修改数据，可以根据条件修改数据</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名称<span class="number">1</span><span class="operator">=</span>需要修改的值<span class="number">1</span>, 字段名称<span class="number">2</span><span class="operator">=</span>需要修改的值<span class="number">2</span> <span class="keyword">where</span> ……</span><br></pre></td></tr></tbody></table></figure>
<p><strong>数据删除</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span>表名 <span class="keyword">where</span> 。。。。。</span><br></pre></td></tr></tbody></table></figure>
<h2 id="创建表加入约束">创建表加入约束<a title="#创建表加入约束" href="#创建表加入约束"></a></h2>
<p><strong>常见的约束</strong><br>
a) 非空约束，not null<br>
b) 唯一约束，unique &nbsp;<br>
c) 主键约束，primary key<br>
d) 外键约束，foreign key<br>
e) 自定义检查约束，check（不建议使用）(在 mysql 中现在还不支持)</p>
<p>**非空约束，**针对某个字段设置其值不为空，如：学生的姓名不能为空</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">	student_id  	<span class="type">int</span>(<span class="number">10</span>),</span><br><span class="line">	student_name 	<span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	sex		<span class="type">char</span>(<span class="number">2</span>)  <span class="keyword">default</span>  <span class="string">'m'</span>,</span><br><span class="line">	birthday	<span class="type">date</span>,</span><br><span class="line">	email		<span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">	classes_id	<span class="type">int</span>(<span class="number">3</span>)</span><br><span class="line">)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>加入不符合约束条件的内容会报错</span><br></pre></td></tr></tbody></table></figure>
<p>**唯一约束 unique **唯一性约束，它可以使某个字段的值不能重复，如：email 不能重复：[每个字段一个约束-列级约束]</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">	student_id  	<span class="type">int</span>(<span class="number">10</span>),</span><br><span class="line">	student_name 	<span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	sex		<span class="type">char</span>(<span class="number">2</span>)  <span class="keyword">default</span>  <span class="string">'m'</span>,</span><br><span class="line">	birthday	<span class="type">date</span>,</span><br><span class="line">	email		<span class="type">varchar</span>(<span class="number">30</span>)  <span class="keyword">unique</span>,</span><br><span class="line">	classes_id	<span class="type">int</span>(<span class="number">3</span>)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(student_id, student_name , sex, birthday, email, classes_id)</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">(<span class="number">1001</span>,<span class="string">'zhangsan'</span>,<span class="string">'m'</span>, <span class="string">'1988-01-01'</span>, <span class="string">'qqq@163.com'</span>, <span class="number">10</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>给两个列或者多个列添加 unique [多个字段联合添加一个约束-表级约束]</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">  	id <span class="type">int</span>,</span><br><span class="line">  	usercode <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  	username <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  	<span class="keyword">unique</span>(usercode,username) <span class="operator">/</span><span class="operator">/</span> 多个字段联合起来添加<span class="number">1</span>个约束<span class="keyword">unique</span> 【表级约束】</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>
<p>注意：not null 约束只有列级约束。没有表级约束。<br>
<strong>主键约束: 不为空且不能重复</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">  id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span>,  <span class="operator">/</span><span class="operator">/</span> 列级约束</span><br><span class="line">  username <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  email <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>
<p>主键约束, 主键值, 主键字段<br>
主键有什么作用？</p>
<ul>
<li>表的设计三范式中有要求，第一范式就要求任何一张表都应该有主键。</li>
<li>主键的作用：主键值是这行记录在这张表当中的唯一标识。（就像一个人的身份证号码一样。）</li>
</ul>
<p>**&nbsp; 主键的分类:**<br>
&nbsp; 根据<strong>主键字段的字段数量</strong>来划分：</p>
<ol>
<li>单一主键（推荐的，常用的。）</li>
<li>复合主键 (多个字段联合起来添加一个主键约束)（复合主键不建议使用，因为复合主键违背三范式。）</li>
</ol>
<p>根据<strong>主键性质</strong>来划分：</p>
<ol>
<li>自然主键：主键值最好就是一个和业务没有任何关系的自然数。（这种方式是推荐的）</li>
<li>业务主键：主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键，拿着身份证号码作为主键。（不推荐用）最好不要拿着和业务挂钩的字段作为主键。因为以后的业务一旦发生改变的时候，主键值可能也需要随着发生变化，但有的时候没有办法变化，因为变化可能会导致主键值重复。</li>
</ol>
<p>一张表的主键约束只能有 1 个。（必须记住）<br>
<strong>mysql 提供主键值自增：（非常重要。）</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line">  <span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">  	id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment, <span class="operator">/</span><span class="operator">/</span> id字段自动维护一个自增的数字，从<span class="number">1</span>开始，以<span class="number">1</span>递增。</span><br><span class="line">  	username <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">  );</span><br></pre></td></tr></tbody></table></figure>
<p><strong>外键约束: 子表引用父表的某一字段</strong><br>
关于外键约束的相关术语：</p>
<ul>
<li>外键约束: foreign key</li>
<li>外键字段：添加有外键约束的字段</li>
<li>外键值：外键字段中的每一个值。</li>
</ul>
<p>删除先删子, 再删除父表<br>
创建的时候先创建父表, 后创建子表<br>
外键可以为 NULL。&nbsp;<br>
外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？<br>
注意：被引用的字段不一定是主键，但至少具有 unique 约束。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">	student_id  	<span class="type">int</span>(<span class="number">10</span>),</span><br><span class="line">	student_name 	<span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">	sex		<span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">	birthday	<span class="type">date</span>,</span><br><span class="line">	email		<span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">	classes_id	<span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">	<span class="keyword">constraint</span> student_id_pk <span class="keyword">primary</span> <span class="keyword">key</span>(student_id),</span><br><span class="line">  <span class="operator">/</span><span class="operator">/</span> 外键约束</span><br><span class="line">	<span class="keyword">constraint</span> fk_classes_id <span class="keyword">foreign</span> <span class="keyword">key</span>(classes_id) <span class="keyword">references</span> t_classes(classes_id)</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h1 id="mysql-函数">MySQL 函数<a title="#mysql-函数" href="#mysql-函数"></a></h1>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628104426-3c96f455-fd2b-4d12-8409-c39de3d0d21a.png#align=left&amp;display=inline&amp;height=422&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=844&amp;originWidth=1629&amp;size=161241&amp;status=done&amp;style=none&amp;width=814.5" alt="image.png" class="φcx"></p>
<h2 id="数字函数">数字函数<a title="#数字函数" href="#数字函数"></a></h2>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628125708-62edf585-c0ac-4095-b875-a52f5c7a0f6b.png#align=left&amp;display=inline&amp;height=429&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=857&amp;originWidth=1582&amp;size=324277&amp;status=done&amp;style=none&amp;width=791" alt="image.png"><br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628448775-653fbf09-85cd-466b-b552-244d78dc50e9.png#align=left&amp;display=inline&amp;height=378&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=755&amp;originWidth=1613&amp;size=274734&amp;status=done&amp;style=none&amp;width=806.5" alt="image.png"></p>
<h2 id="日期函数">日期函数<a title="#日期函数" href="#日期函数"></a></h2>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628801318-9fed73e7-4d83-4563-8221-5a0a345cf5e2.png#align=left&amp;display=inline&amp;height=324&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=647&amp;originWidth=1629&amp;size=184165&amp;status=done&amp;style=none&amp;width=814.5" alt="image.png"><br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608628980094-1b2de4d8-908e-4cc1-a110-f9e072e5d0a2.png#align=left&amp;display=inline&amp;height=426&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=852&amp;originWidth=1628&amp;size=217362&amp;status=done&amp;style=none&amp;width=814" alt="image.png"><br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608629819415-b7f21424-2ba0-4042-adf3-2064624499f5.png#align=left&amp;display=inline&amp;height=373&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=745&amp;originWidth=1743&amp;size=249049&amp;status=done&amp;style=none&amp;width=871.5" alt="image.png"><br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608629982636-1a3d491d-c249-40af-86a9-457c15b09efa.png#align=left&amp;display=inline&amp;height=292&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=584&amp;originWidth=1705&amp;size=138622&amp;status=done&amp;style=none&amp;width=852.5" alt="image.png"></p>
<h2 id="字符函数">字符函数<a title="#字符函数" href="#字符函数"></a></h2>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608630046432-3d5403e5-51f2-420f-b7a3-cf12f7f47db6.png#align=left&amp;display=inline&amp;height=334&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=668&amp;originWidth=1682&amp;size=169480&amp;status=done&amp;style=none&amp;width=841" alt="image.png"><br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608630571966-b8b6ee75-245f-49de-b09a-945ebe612853.png#align=left&amp;display=inline&amp;height=266&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=532&amp;originWidth=1713&amp;size=146491&amp;status=done&amp;style=none&amp;width=856.5" alt="image.png"></p>
<h2 id="条件函数">条件函数<a title="#条件函数" href="#条件函数"></a></h2>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608736977092-96b9a591-d875-4b36-9eb3-07a95995c342.png#align=left&amp;display=inline&amp;height=259&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=518&amp;originWidth=1444&amp;size=73247&amp;status=done&amp;style=none&amp;width=722" alt="image.png"><br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1608737027923-92edb941-68be-4d8f-a2a0-df11df275ac0.png#align=left&amp;display=inline&amp;height=322&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=643&amp;originWidth=1499&amp;size=173223&amp;status=done&amp;style=none&amp;width=749.5" alt="image.png"></p>
<h1 id="事务-tcl">事务 TCL<a title="#事务-tcl" href="#事务-tcl"></a></h1>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> AUTOCOMMIT<span class="operator">=</span><span class="literal">false</span>;</span><br><span class="line"><span class="keyword">START</span> TRANSACTION ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dept;</span><br><span class="line"><span class="keyword">UPDATE</span> dept <span class="keyword">set</span> LOC<span class="operator">=</span><span class="string">'BEIJIN'</span> <span class="keyword">WHERE</span> LOC<span class="operator">=</span><span class="string">'NEW YORK'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span>  dept;</span><br><span class="line"><span class="keyword">ROLLBACK</span> ;</span><br><span class="line"># <span class="keyword">COMMIT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span>  dept;</span><br></pre></td></tr></tbody></table></figure>
<h2 id="关于事务">关于事务<a title="#关于事务" href="#关于事务"></a></h2>
<p>一个事务是一个完整的业务逻辑单元，不可再分。<br>
比如：银行账户转账，从 A 账户向 B 账户转账 10000.需要执行两条 update 语句：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> t_act <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">10000</span> <span class="keyword">where</span> actno <span class="operator">=</span> <span class="string">'act-001'</span>;</span><br><span class="line"><span class="keyword">update</span> t_act <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">10000</span> <span class="keyword">where</span> actno <span class="operator">=</span> <span class="string">'act-002'</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>以上两条 DML 语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。<br>
要想保证以上的两条 DML 语句同时成功或者同时失败，那么就需要使用数据库的**“事务机制”**。<br>
<strong>和事务相关的语句只有：DML 语句。（insert delete update）</strong><br>
为什么？因为它们这三个语句都是和数据库表当中的“数据”相关的。<br>
事务的存在是为了保证数据的完整性，安全性。</p>
<p>假设所有的业务都能使用 1 条 DML 语句搞定，还需要事务机制吗？<br>
不需要事务。<br>
但实际情况不是这样的，通常一个“事儿（事务【业务】）”需要多条 DML 语句共同联合完成。</p>
<p><strong>事务的特性？</strong><br>
事务包括四大特性：ACID<br>
A(Atomicity): 原子性：事务是最小的工作单元，不可再分。<br>
C(Consistency): 一致性：事务必须保证多条 DML 语句同时成功或者同时失败。<br>
I(Isolation)：隔离性：事务 A 与事务 B 之间具有隔离。<br>
D(Durability)：持久性：持久性说的是最终数据必须持久化到硬盘文件中，事务才算成功的结束。</p>
<p><strong>事务中存在一些概念：</strong><br>
a) 事务（Transaction）：一批操作（一组 DML）<br>
b) 开启事务（Start Transaction）<br>
c) 回滚事务（rollback）<br>
d) 提交事务（commit）<br>
e) SET AUTOCOMMIT：禁用或启用事务的自动提交模式</p>
<h2 id="并发过程中存在的问题">并发过程中存在的问题<a title="#并发过程中存在的问题" href="#并发过程中存在的问题"></a></h2>
<p>1 . <strong>丢失更新问题</strong><br>
2 . <strong>读"脏"数据问题</strong><br>
3 . <strong>不可重复读</strong></p>
<h2 id="关于隔离级别">关于隔离级别<a title="#关于隔离级别" href="#关于隔离级别"></a></h2>
<p><strong>关于事务之间的隔离性</strong><br>
&nbsp; 事务隔离性存在隔离级别，理论上隔离级别包括 4 个：<br>
** &nbsp; 第一级别：读未提交（read uncommitted）**<br>
允许一个事务可以看到其他事务未提交的修改。<br>
&nbsp; &nbsp; 对方事务还没有提交，我们当前事务可以读取到对方未提交的数据。<br>
&nbsp; &nbsp; 读未提交存在脏读（Dirty Read）现象：表示读到了脏的数据。<br>
** &nbsp; 第二级别：读已提交（read committed）**<br>
允许一个事务只能看到其他事务已经提交的修改，未提交的修改是不可见的。<br>
&nbsp; &nbsp; 这种隔离级别解决了: 脏读现象没有了。<br>
&nbsp; &nbsp; 读已提交存在的问题是：不可重复读。<br>
每次对方修改, 都读取不到之前的数据, 不可重复读<br>
** &nbsp; 第三级别：可重复读（repeatable read）**<br>
确保如果在一个事务中执行两次相同的 SELECT 语句，都能得到相同的结果，不管其他事务是否提交这些修改。 （银行总账）<br>
&nbsp; &nbsp; 这种隔离级别解决了：不可重复读问题。<br>
事务期间, 读取的数据不变, 不管别的事务是否对硬盘数据进行操作<br>
&nbsp; &nbsp; 这种隔离级别存在的问题是：读取到的数据是幻象。<br>
** &nbsp; 第四级别：序列化读/串行化读（serializable） &nbsp;**<br>
别的事务结束了, 本事务才能操作<br>
&nbsp; &nbsp; 解决了所有问题。<br>
将一个事务与其他事务完全地隔离。&nbsp;<br>
&nbsp; &nbsp; 效率低。需要事务排队。<br>
oracle 数据库默认的隔离级别是：读已提交。<br>
mysql 数据库默认的隔离级别是：可重复读。</p>
<p>mysql 事务默认情况下是自动提交的。<br>
什么是自动提交？只要执行任意一条 DML 语句则提交一次。）怎么关闭自动提交？</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">start</span> transaction;</span><br></pre></td></tr></tbody></table></figure>
<h2 id="设置隔离级别">设置隔离级别<a title="#设置隔离级别" href="#设置隔离级别"></a></h2>
<p>**通过修改配置文件设置 &nbsp;**<br>
可以在 my.ini 文件中使用 transaction-isolation 选项来设置服务器的缺省事务隔离级别。 &nbsp;<br>
该选项值可以是： &nbsp;<br>
– READ-UNCOMMITTED<br>
– READ-COMMITTED<br>
– REPEATABLE-READ<br>
– SERIALIZABLE<br>
例如：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">transaction<span class="operator">-</span>isolation <span class="operator">=</span> READ<span class="operator">-</span>COMMITTED</span><br></pre></td></tr></tbody></table></figure>
<p><strong>通过命令动态设置隔离级别</strong><br>
隔离级别也可以在运行的服务器中动态设置，应使用 SET TRANSACTION ISOLATION LEVEL 语句。 &nbsp;<br>
其语法模式为：<br>
<code>SET [GLOBAL | SESSION] TRANSACTION ISOLATION LEVEL &lt;isolation-level&gt;</code>&nbsp;<br>
其中的<isolation-level>可以是：<br>
– READ UNCOMMITTED<br>
– READ COMMITTED<br>
– REPEATABLE READ<br>
– SERIALIZABLE<br>
例如：</isolation-level></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ;</span><br></pre></td></tr></tbody></table></figure>
<p><strong>查看隔离级别</strong><br>
服务器变量 <code>tx_isolation</code>&nbsp; 包括会话级和全局级两个变量）中保存着当前的会话隔离级别。 &nbsp;<br>
为了查看当前隔离级别，可访问 <code>tx_isolation</code>&nbsp; 变量： &nbsp;<br>
查看会话级的当前隔离级别：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> @<span class="variable">@session</span>.tx_isolation;</span><br></pre></td></tr></tbody></table></figure>
<p>查看全局级的当前隔离级别：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> @<span class="variable">@global</span>.tx_isolation;</span><br></pre></td></tr></tbody></table></figure>
<h1 id="索引">索引<a title="#索引" href="#索引"></a></h1>
<p><strong>什么是索引？有什么用？</strong><br>
索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。<br>
在数据库方面，查询一张表的时候有两种检索方式：<br>
&nbsp; 第一种方式：全表扫描<br>
&nbsp; 第二种方式：根据索引检索（效率很高）<br>
索引为什么可以提高检索效率呢？ 其实最根本的原理是缩小了扫描的范围。</p>
<p>索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护。是有维护成本的。比如，表中的数据经常被修改这样就不适合添加索引，<strong>因为数据一旦修改，索引需要重新排序，进行维护。</strong><br>
添加索引是给某一个字段，或者说某些字段添加索引。<br>
&nbsp;select ename,sal from emp where ename = ‘SMITH’;<br>
&nbsp; 当 ename 字段上没有添加索引的时候，以上 sql 语句会进行全表扫描，扫描 ename 字段中所有的值。<br>
&nbsp; 当 ename 字段上添加索引的时候，以上 sql 语句会根据索引扫描，快速定位。</p>
<p>什么时候考虑<strong>给字段添加索引</strong>？（满足什么条件）</p>
<ol>
<li>数据量庞大。（根据客户的需求，根据线上的环境）</li>
<li>该字段很少的 DML(插入,删除)操作。（因为字段进行修改操作，索引也需要维护）</li>
<li>该字段经常出现在 where 子句中。（经常根据哪个字段查询）</li>
<li>该字段经常出现在连接操作的连接条件中.</li>
</ol>
<p>注意：主键和具有 unique 约束的字段自动会添加索引。根据主键查询效率较高。尽量根据主键检索。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">给薪资sal字段添加索引：</span><br><span class="line"><span class="keyword">create</span> index emp_sal_index <span class="keyword">on</span> emp(sal);</span><br></pre></td></tr></tbody></table></figure>
<p><strong>索引底层采用的数据结构是：B + Tree</strong><br>
<strong>索引的分类</strong></p>
<ol>
<li>单一索引：给单个字段添加索引</li>
<li>复合索引: 给多个字段联合起来添加 1 个索引</li>
<li>主键索引：主键上会自动添加索引</li>
<li>唯一索引：有 unique 约束的字段上会自动添加索引</li>
</ol>
<p><strong>索引的实现原理？</strong><br>
通过 B Tree 缩小扫描范围，底层索引进行了排序，分区，索引会携带数据在表中的“物理地址”，最终通过索引检索到数据之后，获取到关联的物理地址，通过物理地址定位表中的数据，效率是最高的。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">'SMITH'</span>;</span><br><span class="line">通过索引转换为：</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> 物理地址 <span class="operator">=</span> <span class="number">0x3</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>索引什么时候失效？<br>
<code>select ename from emp where ename like '%A%';</code>&nbsp;<br>
模糊查询的时候，第一个通配符使用的是%，这个时候索引是失效的。</p>
<h1 id="视图">视图<a title="#视图" href="#视图"></a></h1>
<p><strong>什么是视图？</strong><br>
站在不同的角度去看到数据。（同一张表的数据，通过不同的角度去看待）。</p>
<p><strong>怎么创建视图？怎么删除视图？</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> myview <span class="keyword">as</span> <span class="keyword">select</span> empno,ename <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> myview;</span><br></pre></td></tr></tbody></table></figure>
<p>注意：只有 DQL 语句才能以视图对象的方式创建出来。<br>
对视图进行增删改查，会影响到原表数据。（通过视图影响原表数据的，不是直接操作的原表）<br>
可以对视图进行 CRUD 操作。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_bak <span class="keyword">as</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> myview1 <span class="keyword">as</span> <span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp_bak;<span class="operator">/</span><span class="operator">/</span> 创建视图</span><br><span class="line"><span class="keyword">update</span> myview1 <span class="keyword">set</span> ename<span class="operator">=</span><span class="string">'hehe'</span>,sal<span class="operator">=</span><span class="number">1</span> <span class="keyword">where</span> empno <span class="operator">=</span> <span class="number">7369</span>; <span class="operator">/</span><span class="operator">/</span> 通过视图修改原表数据。</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> myview1 <span class="keyword">where</span> empno <span class="operator">=</span> <span class="number">7369</span>; <span class="operator">/</span><span class="operator">/</span> 通过视图删除原表数据。</span><br></pre></td></tr></tbody></table></figure>
<p><strong>视图的作用</strong><br>
视图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供相关的视图，java 程序员只对视图对象进行 CRUD。<br>
通过多表连接产生的视图, 每次修改只能修改来自其中一张表的数据.</p>
<h1 id="数据库设计三范式">数据库设计三范式<a title="#数据库设计三范式" href="#数据库设计三范式"></a></h1>
<blockquote>
<p><a href="https://segmentfault.com/a/1190000013695030" target="_blank" rel="external nofollow noopener">https://segmentfault.com/a/1190000013695030</a> &gt; <a href="https://blog.csdn.net/wuyanxiaxia/article/details/22933021" target="_blank" rel="external nofollow noopener">https://blog.csdn.net/wuyanxiaxia/article/details/22933021</a></p>
</blockquote>
<h2 id="第一范式:-原子性">第一范式: 原子性<a title="#第一范式:-原子性" href="#第一范式:-原子性"></a></h2>
<p>每个字段都必须是原子的, 不可再分. 一个字段只存储一项信息<br>
在某个业务需求中: 字段 <strong>年月日</strong> 假如可以被分成 <strong>年,月,日</strong> ,就必须将改字段分为 3 个字段</p>
<h2 id="第二范式:-唯一性">第二范式: 唯一性<a title="#第二范式:-唯一性" href="#第二范式:-唯一性"></a></h2>
<p>每一行都必须满足唯一性, &nbsp; 不同属性完全依赖于同一个主键. 任意一个字段都只依赖表中的同一个字段. 假如依赖于两个字段就需要将该表拆分为两个表.<br>
eg:比如不符合第二范式</p>
<div class="φcy"><div class="φda"><table><thead>
<tr>
<th style="text-align:left">学生证 名称</th>
<th style="text-align:left">学生证号</th>
<th style="text-align:left">学生证办理时间</th>
<th style="text-align:left">借书证名称</th>
<th style="text-align:left">借书证号</th>
<th style="text-align:left">借书证办理时间</th>
</tr>
</thead>
</table></div></div><p>改成 2 张表如下<br>
学生证表</p>
<div class="φcy"><div class="φda"><table><thead>
<tr>
<th style="text-align:left">学生证</th>
<th style="text-align:left">学生证号</th>
<th style="text-align:left">学生证办理时间</th>
</tr>
</thead>
</table></div></div><p>借书证表</p>
<div class="φcy"><div class="φda"><table><thead>
<tr>
<th style="text-align:left">借书证</th>
<th style="text-align:left">借书证号</th>
<th style="text-align:left">借书证把你拉时间</th>
</tr>
</thead>
</table></div></div><h2 id="第三范式:-冗余性">第三范式: 冗余性<a title="#第三范式:-冗余性" href="#第三范式:-冗余性"></a></h2>
<p>要求任何字段不能由其他字段派生出来，它要求字段没有冗余，即不存在传递依赖<br>
eg:爸爸资料表，不满足第三范式</p>
<div class="φcy"><div class="φda"><table><thead>
<tr>
<th style="text-align:left">爸爸</th>
<th style="text-align:left">儿子</th>
<th style="text-align:left">女儿</th>
<th style="text-align:left">女儿的小熊</th>
<th style="text-align:left">女儿的海绵宝宝</th>
</tr>
</thead>
</table></div></div><p>改成<br>
爸爸信息表：</p>
<div class="φcy"><div class="φda"><table><thead>
<tr>
<th style="text-align:left">爸爸</th>
<th style="text-align:left">儿子</th>
<th style="text-align:left">女儿</th>
</tr>
</thead>
</table></div></div><p>女儿信息表</p>
<div class="φcy"><div class="φda"><table><thead>
<tr>
<th style="text-align:left">女儿</th>
<th style="text-align:left">女儿的小熊</th>
<th style="text-align:left">女儿的海绵宝宝</th>
</tr>
</thead>
</table></div></div><p><strong>一对一设计，有两种设计方案:</strong><br>
<strong>第一种设计方案：主键共享</strong><br>
<strong>第二种设计方案：外键唯一</strong></p>
<div><h1 id="推荐文章">推荐文章<a title="#推荐文章" href="%e6%8e%a8%e8%8d%90%e6%96%87%e7%ab%a0"></a></h1><ul><li><a href="https://mvbbb.github.io/ce37t7/">LeetCode 数据库</a></li><li><a href="https://vel.life/P2P%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">P2P系统后端设计</a></li></ul></div></div><is-f class="φcc φv φs"><!----><ul class="φcg"><li class="φce"><strong class="φcf">Author<span>:</span></strong><p class="φcd">Mvbbb</p></li><li class="φce"><strong class="φcf">Link<span>:</span></strong><p class="φcd"><a href="https://mvbbb.github.io/zwggs9/" title="MySQL 基础">https://mvbbb.github.io/zwggs9/</a></p></li><li class="φce"><strong class="φcf">Copyright<span>:</span></strong><p class="φcd">Attribution-NonCommercial-NoDerivatives 4.0 International (<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener" target="_blank">CC BY-NC-ND 4.0</a>)</p></li><!----></ul><!----></is-f><!----><!----><!----></article><footer class="φgb φh"><div class="φgg"><is-m class="φet"><a class="φeu φs φq" href="/tags/MySQL">MySQL</a></is-m><is-m class="φet"><a class="φeu φs φq" href="/tags/SQL">SQL</a></is-m><!----></div><!----><div class="φgc"><a class="φgd φgf φu" href="/ce37t7">LeetCode 数据库</a><!----><a class="φgd φge φu" href="/yn4ex1">换了一个评论系统</a><!----></div><!----></footer><is-e class="φbz φh"><div issnippet="" class="φbh"><div id="tcomment"></div>


</div><!----><!----><!----><!----></is-e><!----><!----><!----></is-s><!----></main><!----></div></div></div><is-g class="φch"><div class="φcq"><span class="φbg icon-up"></span><span class="φbg icon-down"></span><!----><span class="φbg icon-toc"></span><!----><span class="φbg icon-search"></span><!----></div><div class="φcj φck"><svg class="φcp"><defs><filter id="dp"><feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur></filter></defs><circle filter="url(#dp)" fill="rgba(0,0,0,.3)" cx="50%" cy="52%" r="44%"></circle><circle cx="50%" cy="50%" r="44%" class="φcl φbb"></circle><circle cx="50%" cy="50%" r="48%" class="φco φba" stroke-dasharray="0% 314.15926%"></circle><!----><g class="φcm"><circle r=".2rem" cx="0" cy="-.8rem"></circle><circle r=".2rem"></circle><circle r=".2rem" cx="0" cy=".8rem"></circle></g><!----></svg></div></is-g><is-n class="φev φf"><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">1 </span><!----><span class="φfc">MySQL 命令</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">2 </span><!----><span class="φfc">基本 SELECT</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">3 </span><!----><span class="φfc">排序 ORDER BY</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">4 </span><!----><span class="φfc">分组/聚合函数</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">5 </span><!----><span class="φfc">分组查询</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">6 </span><!----><span class="φfc">连接查询 JOIN</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">7 </span><!----><span class="φfc">UNION 并集</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">8 </span><!----><span class="φfc">LIMIT 的使用</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">9 </span><!----><span class="φfc">表</span></a><div class="φex"><a class="φfa φu"><span class="φfb φd">9.1 </span><!----><span class="φfc">创建表</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">9.2 </span><!----><span class="φfc">增/删/改 DDL</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">9.3 </span><!----><span class="φfc">增/删/改 DML</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">9.4 </span><!----><span class="φfc">创建表加入约束</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">10 </span><!----><span class="φfc">MySQL 函数</span></a><div class="φex"><a class="φfa φu"><span class="φfb φd">10.1 </span><!----><span class="φfc">数字函数</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">10.2 </span><!----><span class="φfc">日期函数</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">10.3 </span><!----><span class="φfc">字符函数</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">10.4 </span><!----><span class="φfc">条件函数</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">11 </span><!----><span class="φfc">事务 TCL</span></a><div class="φex"><a class="φfa φu"><span class="φfb φd">11.1 </span><!----><span class="φfc">关于事务</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">11.2 </span><!----><span class="φfc">并发过程中存在的问题</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">11.3 </span><!----><span class="φfc">关于隔离级别</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">11.4 </span><!----><span class="φfc">设置隔离级别</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">12 </span><!----><span class="φfc">索引</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">13 </span><!----><span class="φfc">视图</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">14 </span><!----><span class="φfc">数据库设计三范式</span></a><div class="φex"><a class="φfa φu"><span class="φfb φd">14.1 </span><!----><span class="φfc">第一范式: 原子性</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">14.2 </span><!----><span class="φfc">第二范式: 唯一性</span></a><!----></div><div class="φex"><a class="φfa φu"><span class="φfb φd">14.3 </span><!----><span class="φfc">第三范式: 冗余性</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">15 </span><!----><span class="φfc">推荐文章</span></a><!----></div><!----></is-n><!----><!----></is-a><!-- hexo injector body_begin end --><!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/twikoo@1.0.0/dist/twikoo.all.min.js"></script><script src="/runtime.b15aa7186c559b492b7d.js"></script><script src="/polyfills.824ff89b5f3ca4543a31.js"></script><script src="/main.03652fc423a687c817e8.js"></script><!-- hexo injector body_end end -->

</body></html>