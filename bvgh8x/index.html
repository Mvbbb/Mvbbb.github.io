<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="referrer" content="no-referrer">
<title>在服务器上部署运行Socket - Yu</title>
<base href="/">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<link rel="canonical" href="https://mvbbb.github.io/bvgh8x/">
<link rel="icon" type="image/x-icon" href="/images/web.png">

<meta name="description" content="环境: JDK11+Centos7">
<meta property="og:type" content="website">
<meta property="og:title" content="在服务器上部署运行Socket">
<meta property="og:url" content="https://mvbbb.github.io/bvgh8x/index.html">
<meta property="og:site_name" content="Yu">
<meta property="og:description" content="环境: JDK11+Centos7">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mvbbb.github.io/bvgh8x/images/avatar.jpg">
<meta property="article:published_time" content="2020-11-20T05:46:46.000Z">
<meta property="article:modified_time" content="2021-02-03T04:20:59.221Z">
<meta property="article:author" content="Mvbbb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mvbbb.github.io/bvgh8x/images/avatar.jpg">
<script type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","publisher":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"url":"https://mvbbb.github.io","image":"https://mvbbb.github.io/images/avatar.jpg","description":"Who i am,who u are","author":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"}},{"@context":"http://schema.org","@type":"Article","articleSection":"计算机网络","url":"https://mvbbb.github.io/bvgh8x/","headline":"在服务器上部署运行Socket","image":"https://mvbbb.github.io/images/avatar.jpg","datePublished":"2020-11-20T05:46:46.000Z","dateModified":"2021-02-03T04:20:59.221Z","keywords":"","description":"\n环境: JDK11+Centos7","publisher":{"@type":"Organization","name":"Yu","logo":{"@type":"ImageObject","url":"https://mvbbb.github.io/images/avatar.jpg"}},"author":{"@type":"Person","name":"Mvbbb","description":"Who i am,who u are","image":"https://mvbbb.github.io/images/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mvbbb.github.io/bvgh8x/"}}]</script><link rel="alternate" type="application/atom+xml" title="Yu" href="/rss2.xml">
<script async="" src="//www.googletagmanager.com/gtag/js?id=UA-160027215-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-160027215-1');</script>
<meta name="theme-color" content=""><script type="application/json" is="state">{&q;api/YnZnaDh4.json&q;:{&q;title&q;:&q;在服务器上部署运行Socket&q;,&q;date&q;:&q;2020-11-20T05:46:46.000Z&q;,&q;date_formatted&q;:{&q;ll&q;:&q;Nov 20, 2020&q;,&q;L&q;:&q;11/20/2020&q;,&q;MM-DD&q;:&q;11-20&q;},&q;link&q;:&q;bvgh8x&q;,&q;comments&q;:true,&q;categories&q;:[&q;计算机网络&q;],&q;updated&q;:&q;2021-02-03T04:20:59.221Z&q;,&q;content&q;:&q;&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851968328-a1a7a928-e184-4948-88b4-e7993eeb9cdf.png#align=left&a;amp;display=inline&a;amp;height=31&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=62&a;amp;originWidth=1079&a;amp;size=13086&a;amp;status=done&a;amp;style=none&a;amp;width=539.5\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n环境: JDK11+Centos7&l;/p&g;\n&l;a id=\&q;more\&q;&g;&l;/a&g;\n&l;h1 id=\&q;开通服务器端口\&q;&g;开通服务器端口&l;a title=\&q;#开通服务器端口\&q; href=\&q;#开通服务器端口\&q;&g;&l;/a&g;&l;/h1&g;\n&l;ol&g;\n&l;li&g;宝塔面板开通&l;/li&g;\n&l;/ol&g;\n&l;p&g;&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851354963-dfaa0035-effe-43ca-b3a9-b7de5df27343.png#align=left&a;amp;display=inline&a;amp;height=84&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=167&a;amp;originWidth=1628&a;amp;size=23162&a;amp;status=done&a;amp;style=none&a;amp;width=814\&q; alt=\&q;image.png\&q;&g;&l;br&g;\n2 . 服务器商安全组放行&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851336398-ed35797a-7cb5-4788-8ad2-a3cb95e02989.png#align=left&a;amp;display=inline&a;amp;height=155&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=310&a;amp;originWidth=1594&a;amp;size=43392&a;amp;status=done&a;amp;style=none&a;amp;width=797\&q; alt=\&q;image.png\&q;&g;&l;/p&g;\n&l;h1 id=\&q;编写代码\&q;&g;编写代码&l;a title=\&q;#编写代码\&q; href=\&q;#编写代码\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;服务器端&l;/p&g;\n&l;figure class=\&q;highlight java\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;19&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;21&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;import&l;/span&g; java.net.DatagramPacket;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;import&l;/span&g; java.net.DatagramSocket;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;import&l;/span&g; java.net.InetAddress;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;class\&q;&g;&l;span class=\&q;keyword\&q;&g;class&l;/span&g; &l;span class=\&q;title\&q;&g;UDPServer&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;keyword\&q;&g;static&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;main&l;/span&g;&l;span class=\&q;params\&q;&g;(String[] args)&l;/span&g; &l;span class=\&q;keyword\&q;&g;throws&l;/span&g; Exception&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        DatagramSocket socket = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; DatagramSocket(&l;span class=\&q;number\&q;&g;12000&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;byte&l;/span&g;[] bys=&l;span class=\&q;keyword\&q;&g;new&l;/span&g; &l;span class=\&q;keyword\&q;&g;byte&l;/span&g;[&l;span class=\&q;number\&q;&g;1024&l;/span&g;];&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;int&l;/span&g; length =bys.length;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        DatagramPacket packet = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; DatagramPacket(bys, length);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;while&l;/span&g;(&l;span class=\&q;keyword\&q;&g;true&l;/span&g;) &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            socket.receive(packet);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            InetAddress inetAddress = packet.getAddress();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            String ip= inetAddress.getHostAddress();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;byte&l;/span&g;[] data = packet.getData();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;int&l;/span&g; len= packet.getLength();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            String s = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; String(data, &l;span class=\&q;number\&q;&g;0&l;/span&g;, len);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            System.out.println(ip+&l;span class=\&q;string\&q;&g;&a;quot;传过来的数据是 : &a;quot;&l;/span&g;+s);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;客户端(本地运行)&l;/p&g;\n&l;figure class=\&q;highlight java\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;import&l;/span&g; java.net.*;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;class\&q;&g;&l;span class=\&q;keyword\&q;&g;class&l;/span&g; &l;span class=\&q;title\&q;&g;UDPClient&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;keyword\&q;&g;static&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;main&l;/span&g;&l;span class=\&q;params\&q;&g;(String[] args)&l;/span&g; &l;span class=\&q;keyword\&q;&g;throws&l;/span&g; Exception &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;comment\&q;&g;// 创建 DatagramSocket 类&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        DatagramSocket socket = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; DatagramSocket();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;byte&l;/span&g;[] bys=&l;span class=\&q;string\&q;&g;&a;quot;你好, 我是客户端 &a;quot;&l;/span&g;.getBytes();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;int&l;/span&g; length = bys.length;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        InetAddress address = InetAddress.getByName(&l;span class=\&q;string\&q;&g;&a;quot;***.***.***.***&a;quot;&l;/span&g;);&l;span class=\&q;comment\&q;&g;// 替换为你的服务器IP&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;int&l;/span&g; port =&l;span class=\&q;number\&q;&g;12000&l;/span&g;;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        DatagramPacket packet = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; DatagramPacket(bys,length,address,port);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        socket.send(packet);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        socket.close();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h1 id=\&q;运行代码\&q;&g;运行代码&l;a title=\&q;#运行代码\&q; href=\&q;#运行代码\&q;&g;&l;/a&g;&l;/h1&g;\n&l;p&g;1 . 将服务器代码上传到服务器, 编译运行&l;/p&g;\n&l;figure class=\&q;highlight java\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;javac UDPServer.java &l;span class=\&q;comment\&q;&g;//编译&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;java UDPServer &l;span class=\&q;comment\&q;&g;// 运行&l;/span&g;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;2 . 本地运行 UDPClient, 服务器端会打印内容&l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851968328-a1a7a928-e184-4948-88b4-e7993eeb9cdf.png#align=left&a;amp;display=inline&a;amp;height=31&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=62&a;amp;originWidth=1079&a;amp;size=13086&a;amp;status=done&a;amp;style=none&a;amp;width=539.5\&q; alt=\&q;image.png\&q;&g;&l;/p&g;\n&l;p&g;&l;strong&g;后续:&l;/strong&g;&l;br&g;\n假如不小心关闭了终端, 怎样结束服务器端 UDPServer 程序?&l;br&g;\n1 . 查看 12000 端口占用情况, 找到 Java 进程 PID: &l;code&g;netstat -ntulp |grep 12000&l;/code&g; &l;br&g;\n&l;img src=\&q;https://cdn.nlark.com/yuque/0/2020/png/1552854/1605852218515-076b71ee-ac38-46ad-956a-61762b5e1e64.png#align=left&a;amp;display=inline&a;amp;height=22&a;amp;margin=%5Bobject%20Object%5D&a;amp;name=image.png&a;amp;originHeight=43&a;amp;originWidth=1300&a;amp;size=7313&a;amp;status=done&a;amp;style=none&a;amp;width=650\&q; alt=\&q;image.png\&q;&g;    &l;br&g;\nPID= 23531&l;br&g;\n2 . 使用 &l;code&g;kill -9 [PID]&l;/code&g;  结束 Java 进程&l;/p&g;\n&l;p&g;其他 Socket 程序都是以类似的方式部署运行.&l;/p&g;\n&l;p&g;更多的 Socket 程序请查看 &l;a href=\&q;https://github.com/Mvbbb/small-java-demo/tree/master/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B\&q; target=\&q;_blank\&q; rel=\&q;external nofollow noopener\&q;&g;Java 网络编程&l;/a&g;&l;/p&g;\n&q;,&q;prev&q;:{&q;title&q;:&q;使用 Java 实现简单的 WebServer&q;,&q;link&q;:&q;cxnppw&q;},&q;next&q;:{&q;title&q;:&q;文件上传下载&q;,&q;link&q;:&q;vuhe3q&q;},&q;plink&q;:&q;https://mvbbb.github.io/bvgh8x/&q;,&q;toc&q;:[{&q;id&q;:&q;开通服务器端口&q;,&q;title&q;:&q;开通服务器端口&q;,&q;index&q;:&q;1&q;},{&q;id&q;:&q;编写代码&q;,&q;title&q;:&q;编写代码&q;,&q;index&q;:&q;2&q;},{&q;id&q;:&q;运行代码&q;,&q;title&q;:&q;运行代码&q;,&q;index&q;:&q;3&q;}],&q;copyright&q;:{&q;author&q;:&q;Mvbbb&q;,&q;link&q;:&q;&l;a href=\&q;https://mvbbb.github.io/bvgh8x/\&q; title=\&q;在服务器上部署运行Socket\&q;&g;https://mvbbb.github.io/bvgh8x/&l;/a&g;&q;,&q;license&q;:&q;Attribution-NonCommercial-NoDerivatives 4.0 International (&l;a href=\&q;https://creativecommons.org/licenses/by-nc-sa/4.0/\&q; rel=\&q;external nofollow noopener\&q; target=\&q;_blank\&q;&g;CC BY-NC-ND 4.0&l;/a&g;)&q;}}}</script></head><body lang="en"><div style="display:none"><script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279526637&amp;web_id=1279526637"></script></div>
<!-- hexo injector head_end start --><link href="//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat" rel="stylesheet"><link href="/styles.43478ea7e28ed563c48b.css" rel="stylesheet">
<script src="/config.f667b9e14173c512056d.js"></script>

<link rel="stylesheet" href="/theme.6191587147d30da44d8f.css" is="theme">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0">
<!-- hexo injector body_begin start --><is-a class="φbm φk" ng-version="10.0.11"><is-l class="φeb φh"><div class="φel"><section class="φem"><header class="φec φf"><!----><is-c class="φed"><img draggable="false" class="φbw φw" src="images/avatar.jpg" alt="" title="" width="160" height="160"></is-c><!----><a href="" class="φef φa φu">Mvbbb</a><p class="φee">Who i am,who u are</p></header><div class="φeq φf"><a routerlink="/archives" class="φer φu" href="/archives"><span class="φd">45</span><span>Archives</span></a><a class="φer φu" href="/categories/Java"><span class="φd">14</span><span>Categories</span></a><!----><a routerlink="/tags" class="φer φu" href="/tags"><span class="φd">34</span><span>Tags</span></a><!----></div><!----><nav class="φen"><a class="φeo φbd φj φc φu φo" href="/">Home</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/about">About</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/search">Search</a><!----><!----><!----><!----><a target="_blank" rel="external nofollow noopener" class="φeo φbd φj φc φu φo" href="https://www.yuque.com/u1296515/zb4bwb">Yuque</a><!----><!----><!----></nav><!----><!----></section><footer class="φeg φeh"><div class="φej"><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-email" href="mailto:3212618781@qq.com">email</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-feed" href="https://mvbbb.github.io/rss2.xml">feed</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-github" href="https://github.com/Mvbbb">github</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-myspace" href="/links">myspace</a><!----></div><!----><p class="φbk φz">© 2019-2021 ❤ <a href="https://github.com/Mvbbb">Mvbbb</a></p><!----><!----><!----></footer></div></is-l><div class="φbo"><div class="φbn"><div class="φbs φbe"><main class="φbr φbf"><router-outlet></router-outlet><is-s class="φfx φf"><header class="φgh φgi" style="background-image:;background-color:;"><div class="φgq"><h1 class="φgt">在服务器上部署运行Socket</h1><!----><p class="φgj φr"><span class="φgk φgo">Nov 20, 2020</span><a class="φgk φgm φu" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C">计算机网络</a><!----><!----><!----></p><!----><!----></div></header><article itemscope="" itemtype="http://schema.org/Article" class="φga" data-title="在服务器上部署运行Socket"><div itemprop="articleBody" issnippet="" iszoomable="" class="φbk φh φz"><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851968328-a1a7a928-e184-4948-88b4-e7993eeb9cdf.png#align=left&amp;display=inline&amp;height=31&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=62&amp;originWidth=1079&amp;size=13086&amp;status=done&amp;style=none&amp;width=539.5" alt="image.png"><br>
环境: JDK11+Centos7</p>
<a id="more"></a>
<h1 id="开通服务器端口">开通服务器端口<a title="#开通服务器端口" href="#开通服务器端口"></a></h1>
<ol>
<li>宝塔面板开通</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851354963-dfaa0035-effe-43ca-b3a9-b7de5df27343.png#align=left&amp;display=inline&amp;height=84&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=167&amp;originWidth=1628&amp;size=23162&amp;status=done&amp;style=none&amp;width=814" alt="image.png"><br>
2 . 服务器商安全组放行<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851336398-ed35797a-7cb5-4788-8ad2-a3cb95e02989.png#align=left&amp;display=inline&amp;height=155&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=310&amp;originWidth=1594&amp;size=43392&amp;status=done&amp;style=none&amp;width=797" alt="image.png"></p>
<h1 id="编写代码">编写代码<a title="#编写代码" href="#编写代码"></a></h1>
<p>服务器端</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPServer</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>{</span><br><span class="line">        DatagramSocket socket = <span class="keyword">new</span> DatagramSocket(<span class="number">12000</span>);</span><br><span class="line">        <span class="keyword">byte</span>[] bys=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> length =bys.length;</span><br><span class="line">        DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(bys, length);</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) {</span><br><span class="line">            socket.receive(packet);</span><br><span class="line">            InetAddress inetAddress = packet.getAddress();</span><br><span class="line">            String ip= inetAddress.getHostAddress();</span><br><span class="line">            <span class="keyword">byte</span>[] data = packet.getData();</span><br><span class="line">            <span class="keyword">int</span> len= packet.getLength();</span><br><span class="line">            String s = <span class="keyword">new</span> String(data, <span class="number">0</span>, len);</span><br><span class="line">            System.out.println(ip+<span class="string">"传过来的数据是 : "</span>+s);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>客户端(本地运行)</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPClient</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="comment">// 创建 DatagramSocket 类</span></span><br><span class="line">        DatagramSocket socket = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line">        <span class="keyword">byte</span>[] bys=<span class="string">"你好, 我是客户端 "</span>.getBytes();</span><br><span class="line">        <span class="keyword">int</span> length = bys.length;</span><br><span class="line"></span><br><span class="line">        InetAddress address = InetAddress.getByName(<span class="string">"***.***.***.***"</span>);<span class="comment">// 替换为你的服务器IP</span></span><br><span class="line">        <span class="keyword">int</span> port =<span class="number">12000</span>;</span><br><span class="line">        DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(bys,length,address,port);</span><br><span class="line">        socket.send(packet);</span><br><span class="line">        socket.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1 id="运行代码">运行代码<a title="#运行代码" href="#运行代码"></a></h1>
<p>1 . 将服务器代码上传到服务器, 编译运行</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javac UDPServer.java <span class="comment">//编译</span></span><br><span class="line">java UDPServer <span class="comment">// 运行</span></span><br></pre></td></tr></tbody></table></figure>
<p>2 . 本地运行 UDPClient, 服务器端会打印内容<br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1605851968328-a1a7a928-e184-4948-88b4-e7993eeb9cdf.png#align=left&amp;display=inline&amp;height=31&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=62&amp;originWidth=1079&amp;size=13086&amp;status=done&amp;style=none&amp;width=539.5" alt="image.png"></p>
<p><strong>后续:</strong><br>
假如不小心关闭了终端, 怎样结束服务器端 UDPServer 程序?<br>
1 . 查看 12000 端口占用情况, 找到 Java 进程 PID: <code>netstat -ntulp |grep 12000</code>&nbsp;<br>
<img src="https://cdn.nlark.com/yuque/0/2020/png/1552854/1605852218515-076b71ee-ac38-46ad-956a-61762b5e1e64.png#align=left&amp;display=inline&amp;height=22&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=43&amp;originWidth=1300&amp;size=7313&amp;status=done&amp;style=none&amp;width=650" alt="image.png">&nbsp; &nbsp;&nbsp;<br>
PID= 23531<br>
2 . 使用 <code>kill -9 [PID]</code>&nbsp; 结束 Java 进程</p>
<p>其他 Socket 程序都是以类似的方式部署运行.</p>
<p>更多的 Socket 程序请查看 <a href="https://github.com/Mvbbb/small-java-demo/tree/master/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B" target="_blank" rel="external nofollow noopener">Java 网络编程</a></p>
</div><is-f class="φcc φv φs"><!----><ul class="φcg"><li class="φce"><strong class="φcf">Author<span>:</span></strong><p class="φcd">Mvbbb</p></li><li class="φce"><strong class="φcf">Link<span>:</span></strong><p class="φcd"><a href="https://mvbbb.github.io/bvgh8x/" title="在服务器上部署运行Socket">https://mvbbb.github.io/bvgh8x/</a></p></li><li class="φce"><strong class="φcf">Copyright<span>:</span></strong><p class="φcd">Attribution-NonCommercial-NoDerivatives 4.0 International (<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener" target="_blank">CC BY-NC-ND 4.0</a>)</p></li><!----></ul><!----></is-f><!----><!----><!----></article><footer class="φgb φh"><!----><div class="φgc"><a class="φgd φgf φu" href="/cxnppw">使用 Java 实现简单的 WebServer</a><!----><a class="φgd φge φu" href="/vuhe3q">文件上传下载</a><!----></div><!----></footer><is-e class="φbz φh"><div issnippet="" class="φbh"><div id="tcomment"></div>


</div><!----><!----><!----><!----></is-e><!----><!----><!----></is-s><!----></main><!----></div></div></div><is-g class="φch"><div class="φcq"><span class="φbg icon-up"></span><span class="φbg icon-down"></span><!----><span class="φbg icon-toc"></span><!----><span class="φbg icon-search"></span><!----></div><div class="φcj φck"><svg class="φcp"><defs><filter id="dp"><feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur></filter></defs><circle filter="url(#dp)" fill="rgba(0,0,0,.3)" cx="50%" cy="52%" r="44%"></circle><circle cx="50%" cy="50%" r="44%" class="φcl φbb"></circle><circle cx="50%" cy="50%" r="48%" class="φco φba" stroke-dasharray="0% 314.15926%"></circle><!----><g class="φcm"><circle r=".2rem" cx="0" cy="-.8rem"></circle><circle r=".2rem"></circle><circle r=".2rem" cx="0" cy=".8rem"></circle></g><!----></svg></div></is-g><is-n class="φev φf"><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">1 </span><!----><span class="φfc">开通服务器端口</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">2 </span><!----><span class="φfc">编写代码</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><span class="φfb φd">3 </span><!----><span class="φfc">运行代码</span></a><!----></div><!----></is-n><!----><!----></is-a><!-- hexo injector body_begin end --><!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/twikoo@1.0.0/dist/twikoo.all.min.js"></script><script src="/runtime.b15aa7186c559b492b7d.js"></script><script src="/polyfills.824ff89b5f3ca4543a31.js"></script><script src="/main.03652fc423a687c817e8.js"></script><!-- hexo injector body_end end -->

</body></html>